<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Project Ideas" />
<meta property="og:description" content="[JupyterHub](https://github.com/jupyterhub/jupyterhub) | [MyBinder](https://mybinder.org) | [Kubernetes](https://k8s.io) | Open Culture" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://words.yuvi.in/categories/project-ideas/" />
<meta property="og:updated_time" content="2018-06-18T13:14:59-07:00"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Project Ideas"/>
<meta name="twitter:description" content="[JupyterHub](https://github.com/jupyterhub/jupyterhub) | [MyBinder](https://mybinder.org) | [Kubernetes](https://k8s.io) | Open Culture"/>
<meta name="generator" content="Hugo 0.47" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Blog",
  "headline": "Yuvi Panda",
  "url" : "http://words.yuvi.in/categories/project-ideas/",
  "author": {
    "@type": "Person",
    "name": ""
  },
  "dateModified": "2018-06-18T13:14:59-07:00",
  "keywords": "books,class-notes,code,devlog,education,events,jupyter,kubernetes,links,lol-culture,papers,personal,project-ideas,retrospective,so-called-it,uncategorized,wiki,work-plan,algorithm,android,anniversary,answers,athiesm,atleast-not-yet,bigco,bigotry,binder,blogging,book,code,crime,democratizing-programming,devlog,devlog-dec-2011,education,external-enforcement,fiction,flipkart,india,interview,it,js,learning,link,linux,note-to-future-self,opensource,parenting,personal,photo,photography,php,python,rant,reddit,reprint,resistance,review,rights,sick,sriram,systemd,talk,talks,travel,twitter,wordpress,work,yahoo,",
  "description": "[JupyterHub](https://github.com/jupyterhub/jupyterhub) | [MyBinder](https://mybinder.org) | [Kubernetes](https://k8s.io) | Open Culture"
}
</script>


    <link rel="canonical" href="http://words.yuvi.in/categories/project-ideas/">

    <title>Yuvi Panda</title>

    <!-- combined, minified CSS -->
    <link href="http://words.yuvi.in/css/style.css" rel="stylesheet" integrity="sha384-O8wjsnz02XiyrPxnhfF6AVOv6YLBaEGRCnVF&#43;DL3gCPBy9cieyHcpixIrVyD2JS5" crossorigin="anonymous">

    
    <!-- RSS 2.0 feed -->
    <link href="http://words.yuvi.in/categories/project-ideas/index.xml" rel="alternate" type="application/rss+xml" title="Yuvi Panda" />
    

    

    

    

  </head>

  <body>

    <div class="blog-masthead">
    
    </div>

    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title">
            
            <img src='/profile.jpg' width=80 style="border-radius: 50%; margin-bottom: 12px;">
            <a href="http://words.yuvi.in/" rel="home">Yuvi Panda</a></h1>
        <p class="lead blog-description"><a href="https://github.com/jupyterhub/jupyterhub">JupyterHub</a> | <a href="https://mybinder.org">MyBinder</a> | <a href="https://k8s.io">Kubernetes</a> | Open Culture</p>
      </div>
    </header>

    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          







<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="http://words.yuvi.in/post/the-littlest-jupyterhub/">The Littlest Jupyterhub</a></h2>
    <p class="blog-post-meta"><time datetime="2018-06-18T13:14:59-07:00">Mon Jun 18, 2018</time> by  in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/jupyter" rel="category tag">jupyter</a>, <a href="/categories/project-ideas" rel="category tag">project-ideas</a>


</p>
  </header>
  

<p>This idea comes from brainstorming along with <a href="https://lindseyjh.ca/">Lindsey
Heagy</a>, <a href="https://www.willingconsulting.com/">Carol
Willing</a>, <a href="https://github.com/betatim">Tim
Head</a> &amp; <a href="https://github.com/bollwyvl">Nick
Bollweg</a> at the Jupyter Team Meeting 2018. Most
of the good ideas are theirs! The name is inspired by <a href="https://en.wikipedia.org/wiki/The_Littlest_Hobo">one of favorite TV
series</a> of one of my
favorite people.</p>

<p>I really love the idea of <a href="https://github.com/jupyterhub/jupyterhub">JupyterHub</a> distributions - opinionated combination
of components that target a specific use case. The <a href="https://z2jh.jupyter.org">Zero to JupyterHub</a>
distribution is awesome &amp; works for most people. However, it requires
<a href="https://kubernetes.io">Kubernetes</a> - a distributed system with inherent complexities that is not
worth it below a certain threshold.</p>

<p>This blog post lays out ideas for implementing a simpler, smaller distribution called
<em>The Littlest JupyterHub</em>. The Littlest JupyterHub serves <a href="https://en.wikipedia.org/wiki/Long_tail">the long tail</a> of potential JupyterHub users
who have the following needs only.</p>

<ol>
<li>Support a very small number of students (around 20â€“30, maybe 50)</li>
<li>Run on only one node, either <a href="http://digitalocean.com/">a cheap VPS</a> or a
VM on their <a href="https://cloud.google.com">favorite cloud provider</a></li>
<li>Provide the same environment for all students</li>
<li>Allow the instructor / admin to easily modify the environment for students with no specialized knowledge</li>
<li>Be extremely low maintenance once set up &amp; easily fixable when it breaks</li>
<li>Allow easy upgrades</li>
<li>Enforce memory / CPU limits for students</li>
</ol>

<p>The target audience is primarily educators teaching small classes with
Jupyter Notebooks. It should be an extremely focused distribution, with new
feature requests facing higher scrutiny than usual. It has a legitimate
chance of actually reaching 1.0 &amp; being stable, requiring minimal ongoing
upgrades!</p>

<h2 id="jupyterhub-setup">JupyterHub setup</h2>

<p>JupyterHub +
<a href="https://github.com/jupyterhub/configurable-http-proxy">ConfigurableHTTPProxy</a>
run as standard <a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">systemd services</a>.
<a href="https://github.com/jupyterhub/systemdspawner">Systemd spawner is used</a> - it is lightweight, allows JupyterHub
restarts without killing user servers &amp; provides CPU / memory isolation.</p>

<p>Something like <a href="https://github.com/yuvipanda/jupyterhub-firstuseauthenticator">First Use
Authenticator</a>
+ a user whitelist might be good enough for a large number of users. New
authenticators are added whenever users ask for them.</p>

<p>The JupyterHub system is in its own root owned conda environment or
virtualenv, to prevent accidental damage from users.</p>

<h2 id="user-environment">User environment</h2>

<p>There is a single
conda environment shared by all the users. JupyterHub admins have
write access to this environment, and everyone else has read access. Admins
can install new libraries for all users with conda/pip. No extra steps
needed, and you can do this from inside JupyterHub without needing to ssh.</p>

<p>Each user gets their own home directory, and can install packages there if
they wish. systemdspawner puts each user server in a systemd service, and
provides <a href="https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html">fine grained
control</a>
over memory &amp; cpu usage. Users also get their own system user, providing an
additional layer of security &amp; standardized home directory locations.</p>

<h2 id="configuration">Configuration</h2>

<p><a href="http://yaml.org/">YAML</a> is used for config - it is the
least bad of all the currently available languages, IMO. Ideally, something
like the <a href="https://www.sudo.ws/man/1.8.17/visudo.man.html"><code>visudo</code></a> command
would exist for editing &amp; applying this config. It&rsquo;ll
open the config file in an editor, allow users to edit it, and apply it only
if it is valid. Advanced users can sidestep this and edit files directly. The
YAML file is read and processed directly in <code>jupyterhub_config.py</code>. This
simplifies things &amp; gives us fewer things to break.</p>

<h2 id="upgrading-the-distribution">Upgrading the distribution</h2>

<p>Backwards compatible upgrading will be supported across one
minor version only - so you can go from 0.7 to 0.8, but not 0.9. Upgrades
should not cause outages.</p>

<h2 id="installation-mechanism">Installation mechanism</h2>

<p>Users run a command on a fresh server to install this distribution. This could use
conda constructor (thanks to Nick Bollweig &amp; <a href="http://matthewrocklin.com/">Matt
Rocklin</a> for convincing me!)
or debian packages (with fpm or dh-virtualenv). The user environments will be
<a href="https://conda.io/">conda environments</a>.</p>

<p>A <code>curl &lt;some-url&gt; | sudo bash</code> command is available in a
nice looking website for the distribution that users can copy paste into
their fresh VM. This website also has instructions for creating a fresh VM in
popular cloud providers &amp; VPS providers.</p>

<h2 id="debuggability">Debuggability</h2>

<p>All systems exist in a partially degraded state all the time. Good systems
self-heal &amp; continue to run as well as they can. When they can&rsquo;t, they break
cleanly in known ways. They are observable enough to debug the issues that
cause 80% of the problems.</p>

<p>The Littlest JupyterHub should be a good system. Systemd captures
logs from JupyterHub, user servers &amp; the proxy. Strong validation of the
config file catches fatal misconfigurations. Reboots actually fix most issues
and never make anything worse. Screwed up user environments are recoverable.</p>

<p>We&rsquo;ll discover how this breaks as users of varying skill levels use it, and
update our tooling accordingly.</p>

<h2 id="but-no-docker">But, No Docker?</h2>

<p>Docker has been explicitly excluded from this tech stack. Building custom
docker images &amp; dealing with registries is too complex most educators. A good
distribution embraces its constraints &amp; does well!</p>

<h2 id="contribute">Contribute</h2>

<p>Are you a person who would use a distribution like this? We would love to
hear from you! Make an issue <a href="https://github.com/yuvipanda/the-littlest-jupyterhub">on GitHub</a>,
<a href="https://twitter.com/yuvipanda">tweet at me</a>, or send me <a href="mailto:yuvipanda@gmail.com">an email</a>.</p>

</article> 








        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>about</h4>
    <p>I build infrastructure that helps reduce accidental complexities when using code to solve problems.</p>
  </section>
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>projects</h4>
    <p><p>Primarily working on <a href="https://z2jh.jupyter.org">Zero to JupyterHub</a> and <a href="https://mybinder.org">MyBinder</a></p>

<p>See more on my <a href="https://github.com/yuvipanda">GitHub Profile</a></p>
</p>
  </section>
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>work</h4>
    <p><p>I design, build &amp; operate large scale teaching infrastructure for the <a href="https://data.berkeley.edu/">Data Science Division at UC Berkeley</a>.</p>

<p>I also help run <a href="https://mybinder.org">MyBinder</a> thanks to a generous grant from the Gordon &amp; Betty Moore Foundation.</p>
</p>
  </section>
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>contact</h4>
    <p><a href="mailto:yuvipanda@gmail.com">Email</a> is the best way to contact me privately.
<a href="https://twitter.com/yuvipanda">Twitter</a> is the best way to contact me publicly.</p>
  </section>
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/post/oss-in-the-cloud/">Freedoms for Open Source Software users in the Cloud</a></li>

<li><a href="/post/aug-2018-plan/">Aug 2018 Work Plan</a></li>

<li><a href="/post/conda-constructor-thoughts/">Conda Constructor Thoughts</a></li>

<li><a href="/post/the-littlest-jupyterhub/">The Littlest Jupyterhub</a></li>

<li><a href="/post/kubectl-rbac/">Kubectl verbose logging tricks</a></li>

    </ol>
  </section>

  

  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="blog-footer">
      <p>
      
      Blog template created by <a href="https://twitter.com/mdo">@mdo</a>, ported to Hugo by <a href='https://twitter.com/mralanorth'>@mralanorth</a>.
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>

  </body>

</html>
