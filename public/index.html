<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Yuvi</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Yuvi" /><meta name="description" content="Recovering overachieving child, now trying to achieve the correct amount" /><meta name="keywords" content="yuvi, yuvipanda" />






<meta name="generator" content="Hugo 0.121.2 with theme even" />


<link rel="canonical" href="https://words.yuvi.in/" />
  <link href="https://words.yuvi.in/index.xml" rel="alternate" type="application/rss+xml" title="Yuvi" />
  <link href="https://words.yuvi.in/index.xml" rel="feed" type="application/rss+xml" title="Yuvi" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.e059920966ff69c21fadbe27d9c4ef213858a17a09e6d3ecfc551eb61c6dcbdc.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">



<link rel="stylesheet" href="/lib/fontawesome-free-5.13.1-web/css/all.min.css">

<meta property="og:title" content="Yuvi" />
<meta property="og:description" content="Recovering overachieving child, now trying to achieve the correct amount" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://words.yuvi.in/" />

<meta itemprop="name" content="Yuvi">
<meta itemprop="description" content="Recovering overachieving child, now trying to achieve the correct amount"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Yuvi"/>
<meta name="twitter:description" content="Recovering overachieving child, now trying to achieve the correct amount"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Yuvi</a>
  <div class='logo-site-description'>Recovering overachieving child, now trying to achieve the correct amount
  </div>
</div>

<div class="logo-social">
      <a href="mailto:yuvipanda@gmail.com" class="fas fa-envelope" title="envelope"></a>
      <a href="https://hachyderm.io/@yuvipanda" class="fab fa-twitter" title="twitter"></a>
      <a href="https://github.com/yuvipanda" class="fab fa-github" title="github"></a>
  <a href="https://words.yuvi.in/index.xml" type="application/rss+xml" class="fas fa-rss" title="rss"></a>
</div>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <section id="posts" class="posts">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/pre-compiling-julia-docker/">Precompiling Julia Packages in Docker Images</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2023-11-29 </span>
      
        <span class="more-meta"> 556 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>Julia <a href="https://julialang.org/blog/2021/01/precompile_tutorial/">pre-compiles</a> packages on first load, allowing them to deeply optimize the generated code for the particular CPU architecture the user is running on for maximum performance. However, it <em>does</em> take some time, so there&rsquo;s a startup latency penalty here. If you make docker images with precompiled Julia packages, you can pay this pre-compilation penalty at <em>image build time</em>, rather than at <em>image startup time</em>. Much better for your users!</p>
<p>If you look at the <a href="https://julialang.org/blog/2021/01/precompile_tutorial/">tutorial</a> for pre-compilation, it may sound like all you need to do is call <a href="https://pkgdocs.julialang.org/v1/api/#Pkg.precompile"><code>Pkg.precompile</code></a>. And if you actually build and test your docker image, it will work fine - your precompiled libraries are loaded, and startup is fast. Yay!</p>
<p>But then you push your built image to a registry, and someone else pulls it and runs it - and the pre-compilation has no effect! Packages are pre-compiled again on first run, and sometimes this may take multiple minutes, causing weird to debug timeouts. But then <em>you</em> can&rsquo;t reproduce it, because it runs fine on your computer! What&rsquo;s going on?</p>
<p>What is going on is an <a href="https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/">abstraction leak</a>. We think of computers as &lsquo;computers&rsquo;, and often it&rsquo;s easy to forget that there&rsquo;s just a wide wide variety of them. After a few decades of Intel&rsquo;s (or should I say <a href="https://en.wikipedia.org/wiki/X86-64#History_2">AMD&rsquo;s</a>) amd64 architecture hegemony, M1 Macs (and Raspberry Pi) have at least forced us to consider that ARM64 exists as well. But those are still just broad <em>classes</em> of architectures, and each generation of CPUs within them also have differences, with specific instructions available in some that aren&rsquo;t in others.</p>
<p>So turns out Julia&rsquo;s pre-compilation is CPU dependent (or more specifically, <a href="https://en.wikipedia.org/wiki/Instruction_set_architecture">ISA</a> dependent). So if I build my docker image on one type of CPU, the pre-compiled files will only be used when running on the same type of CPU!</p>
<p>The limits of &lsquo;works on my machine&rsquo; :)</p>
<p>This manifested as a <a href="https://github.com/jupyter/docker-stacks/issues/2015">&lsquo;Pluto notebook is not starting when run on JupyterHub&rsquo;</a> issue. It was fun <a href="https://github.com/jupyter/docker-stacks/issues/2015#issuecomment-1829232453">debugging this</a>, eventually leading me to discover this bit about Julia pre-compilation. We eventually <a href="https://github.com/jupyter/docker-stacks/pull/2044">landed a fix</a> that cross compiles to a number of different ISAs, producing a &lsquo;fat binary pre-compilation&rsquo; that starts fast on a number of different CPUs!</p>
<p>I&rsquo;m also personally happy with the amount of time this took - I&rsquo;m trying to learn to wean myself off high stress &lsquo;gotta fix it now&rsquo; open source maintenance, and a slower paced <em>but</em> more consistent approach.</p>
<p>Anyway, if you&rsquo;re building Docker images with Julia in them, and want to pre-compile any packages you install in the image (as you should), I recommend the following bash snippet before you call <code>Pkg.precompile</code></p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#00a8c8">if</span> <span style="color:#f92672">[</span> <span style="color:#d88200">&#34;</span><span style="color:#00a8c8">$(</span>uname -m<span style="color:#00a8c8">)</span><span style="color:#d88200">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#34;x86_64&#34;</span> <span style="color:#f92672">]</span><span style="color:#111">;</span> <span style="color:#00a8c8">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># See https://github.com/JuliaCI/julia-buildkite/blob/70bde73f6cb17d4381b62236fc2d96b1c7acbba7/utilities/build_envs.sh#L24</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for an explanation of these options</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">export</span> <span style="color:#111">JULIA_CPU_TARGET</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;generic;sandybridge,-xsaveopt,clone_all;haswell,-rdrnd,base(1)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">elif</span> <span style="color:#f92672">[</span> <span style="color:#d88200">&#34;</span><span style="color:#00a8c8">$(</span>uname -m<span style="color:#00a8c8">)</span><span style="color:#d88200">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#34;aarch64&#34;</span> <span style="color:#f92672">]</span><span style="color:#111">;</span> <span style="color:#00a8c8">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># See https://github.com/JuliaCI/julia-buildkite/blob/70bde73f6cb17d4381b62236fc2d96b1c7acbba7/utilities/build_envs.sh#L54</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># for an explanation of these options</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">export</span> <span style="color:#111">JULIA_CPU_TARGET</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;generic;cortex-a57;thunderx2t99;carmel&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">fi</span>
</span></span></code></pre></div><p>This is what the <a href="https://julialang.org/downloads/">official Julia binary</a> is built with (and you should be using <em>that</em>, not your distro provided binary). It may need updating as new ISAs come out, but otherwise should help.</p>
<p>Thanks to <a href="https://github.com/mathbunnyru">mathbunnyru</a> and <a href="https://github.com/benz0li">benz0li</a> for helping with this.</p>
<p>P.S. Did you know that Python <em>also</em> does pre-compilation, and that can <em>also</em> have a massive effect on python startup time? I did a <a href="https://github.com/pangeo-data/pangeo-docker-images/pull/426">similar debugging session</a> on that a while back.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/adhd-and-me/">ADHD and Me</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2023-11-22 </span>
      
        <span class="more-meta"> 1215 words </span>
        <span class="more-meta"> 6 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <h2 id="why-write-this">Why write this?</h2>
<p>This August / September, I had a lot of life changes in one go:</p>
<ol>
<li>Moving from an apartment i disliked to one I absolutely love, and maybe even feel at home in, for the first time in my life</li>
<li>Officially switch jobs, becoming an employee of a non-profit I had co-founded</li>
<li>Catch COVID for the first time and recover from it, with appropriate MH breakdowns from the isolation</li>
<li>Get on <a href="https://medlineplus.gov/druginfo/meds/a601059.html">Guanfacine</a> as a non-stimulant medication for ADHD</li>
</ol>
<p>While I can not fully separate the effects of these changes, the overall effect has been very good for me. The ADHD meds form an important and specific component, and I think I am primarily writing this to understand what that is. Many years ago, I had started on bipolar 2 meds and anti anxiety meds at the same time, and attributed some positive changes to the bipolar 2 meds that were not true - it was almost exclusively the anti anxiety meds. This contributed to me living with a misdiagnosis for many years, and taking meds I just didn&rsquo;t need. So I don’t want to unconditionally say all the good positives in my life are from this, but recognize that <em>some</em> are, especially this time we did not mix it with another pharmacological intervention. Writing it down now should also allow me to come back to it a year or two later to see how that has evolved</p>
<h2 id="dosage--side-effects">Dosage &amp; Side Effects</h2>
<p>I currently take 2mg a day in the morning, after starting at 1mg. No plans to increase dose further. I had some dry mouth for a week or so when starting, but it has mostly subsided.</p>
<p>I had been on Ritalin for a few months when I was first diagnosed (happened when I was 20). It was an important marker in my life (my first thought when it kicked in was &ldquo;Wow, is this how normal people feel?&rdquo;). I did not enjoy the “crash” in the evening, but now i suspect increased dosage or an extended release would have helped fix that. But I was still in Chennai at that time, and due to various socioeconomic factors + how hard it was to access, I gave up after 2 months. While I got back on other psych meds later, due to various other mental health comorbidities, I&rsquo;ve been wary of trying stimulants for myself. I&rsquo;m <strong>extremely</strong> happy that there are now non-stimulant options for ADHD, and one of them is working for me.</p>
<h2 id="productive-capacity">Productive capacity</h2>
<p>The first, and most noticeable difference is that doing “work” (broadly defined as &rsquo;thing that pays my salary&rsquo;) is easier. Specifically,</p>
<ol>
<li>I can focus on a single problem for a longer stretch before I lose energy and hence focus. My work sessions now seem to be closer to an hour before a break rather than 20minutes before a break. This also means the total amount of time I can bring to bear on a problem per day has increased, as much as by 50%.</li>
<li>I seem to have more control over what I am actually interested in. I know I do great work when I focus on something, but I never felt fully in control over what things I could choose to put my attention on. We have to evaluate this more long term, but so far, this atrophied muscle seems to be slowly growing.</li>
<li>I am able to actually plan my day and do the things I have planned, and say &rsquo;not now&rsquo; to other things I may want to do during the middle of the day. I have never managed to stick with <em>any</em> kind of personal planning system. What I had <em>planned</em> and what I would actually <em>do</em> would often not match up, causing some amount of emotional pain (&ldquo;Why am I so incompetent?&rdquo; usually). After a while, I&rsquo;ll give up said system because the pain is just too much, instead chasing the ephemeral joy of just doing things.</li>
</ol>
<p>So my <strong>overall capacity</strong> has increased (1), and so has my ability to apply it in a <strong>particular direction</strong>. This is awesome. It&rsquo;s now up to me to work on building systems that allow using these gains, building <strong>organizational muscle</strong> that was just not possible before (3). I&rsquo;m excited to build this muscle, re-trying things that I had tried before and failed at. One specific hope I have is that it&rsquo;ll help me go from someone who gets something to 80% completion to someone who gets things to 100% completion more times.</p>
<p>A side-note here here about my <a href="https://www.additudemag.com/adhd-tax-financial-wellness-money-problems/">ADHD Tax</a>, which has been primarily paid as shame and emotional turmoil (ask anyone who has been around me whenever I have had to apply for a Visa), although of course there has been a financial and opportunity cost. This has gotten <em>so much better</em>. I just got a ton of pending paperwork finished, without the usual attached emotional turmoil. For the first time in my life, I think I will be able to get on top of this and <em>stay</em> on top of it.</p>
<h2 id="emotional-capacity">Emotional capacity</h2>
<blockquote>
<p>Between the stimulus and response, there is a space. And in that space lies our freedom and power to choose our responses.</p>
</blockquote>
<p>This quote from Victor Frankl has always stuck with me, and I think Guanfacine has just <em>increased</em> the amount of this space I have to do this.</p>
<p>I have been in therapy for a long time, and will probably continue to be forever. I have learnt many skills I can bring to bear, particularly at times of extreme (and often disproportionate) emotional distress (something that seems to happen far too frequently for my taste). However, often when you are emotionally distressed, you just don&rsquo;t have the capacity to use those tools! The best you can do is to avoid causing harm, to yourself or others, and retreat for your body to recover.</p>
<p>Guanfacine has definitely made this situation better. I have more capacity now to actually <em>use the tools</em> I have learnt, and iterate on them. Insight is often useless without action, and Guanfacine has given me far more scope for action than I had before. This isn&rsquo;t something that &lsquo;heals&rsquo; everything (no such thing, unfortunately) - but it has vastly increased my ability to &lsquo;do&rsquo; rather than just &lsquo;know&rsquo; or &lsquo;feel&rsquo;. Very grateful to have it.</p>
<h2 id="what-now">What now?</h2>
<p>My overall goal has been to find ways to heal and lead a less miserable, more joyful life than I have in the past. I understand this is probably a years, decades-long process, and I&rsquo;m much closer to the start than to the middle Guanfacine feels like a significant boost along the way here. I&rsquo;ll check back-in in a year and see how the things in this post have aged :)</p>
<p>If you think you may have ADHD, consider getting evaluated and trying some medication. This may be a fucked up process that you may not be able to afford for economic, social or even just ADHD reasons (may need a lot of follow through ugh). But, I think it is <strong>absolutely</strong> worth it, so if it is available to you and you have been putting it off, consider this a sign to re-prioritize that.</p>
<p>You can reach out to me by emailing <code>yuvipanda@gmail.com</code> if you wanna say hi.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/work-report-2023-06-20/">Devlog 2023-06-20</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2023-06-20 </span>
      <div class="post-category">
          <a href="/categories/workreport/"> workreport </a>
          </div>
        <span class="more-meta"> 368 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>Trying to start these back up, as a list of the kind of &lsquo;work&rsquo; I have done
the last few weeks. Let&rsquo;s see if this works!</p>
<h3 id="last-2-weeks">Last 2 weeks</h3>
<ol>
<li>Spent a good chunk of time investigating and fixing issues with <a href="https://github.com/2i2c-org/infrastructure/issues/2628">AzureAD auth</a> for the UToronto hub. &ldquo;Fixing&rdquo; it meant moving off AzureAD, so we only have CILogon &amp; GitHub in the 2i2c infrastructure as authentication providers! This is now <a href="https://github.com/2i2c-org/docs/pull/187">explicitly mentioned</a> in our docs. An incident report still needs to be written.</li>
<li>Upgraded Azure AKS for UToronto, leading to a pretty gnarly outage. Incident report needs writing. <a href="https://github.com/2i2c-org/infrastructure/issues/2594">issue</a>.</li>
<li>Finished setting up the <a href="https://github.com/2i2c-org/infrastructure/issues/2524">ClimateMatch hub</a>. Part of this involved adding terraform support for proper, single-hub nodepools in GCP.</li>
<li>With help from @sean-morris, all Cloudbank Hubs now use a <a href="https://github.com/2i2c-org/infrastructure/issues/2435">data8 style image</a>. This has reduced the number of non-staging hubs using the old &lsquo;default&rsquo; 2i2c image to 5! When unspecified, the default image in use now is <a href="https://github.com/2i2c-org/infrastructure/pull/2671">jupyter/scipy-notebook</a>. These communities should be <a href="https://github.com/2i2c-org/infrastructure/issues/2674">contacted</a> and a different image be used for them, so we do not have to maintain this &lsquo;default&rsquo; image anymore.</li>
<li>With the goal of removing special cases from the 2i2c infrastructure, I am working on removing the <a href="https://github.com/2i2c-org/infrastructure/issues/1105">manually maintained NFS servers</a> from our infrastructure. I had thought only the 2i2c shared cluster had it, turns out the cloudbank one does too! The 2i2c shared cluster has been migrated off, the cloudbank one will be soon. With that, home directories are unified for all clusters, and no longer require specialized knowledge of filesystems, etc to manage.</li>
<li>Did a bunch of cleanup work on our terraform code.
<ul>
<li>Remove unused AzureFile SMB support, as we use NFS everywhere. Yay consistency. <a href="https://github.com/2i2c-org/infrastructure/pull/2676">Pull</a></li>
<li>Fix terraform linting errors and fix the job that was doing the lint to actually do the lint. <a href="https://github.com/2i2c-org/infrastructure/pull/2677">Pull</a>.</li>
<li>Use optional fields in our terraform variables, for cleaner <code>.tfvars</code> files. <a href="https://github.com/2i2c-org/infrastructure/pull/2664">Pull</a></li>
</ul>
</li>
</ol>
<h3 id="upcoming-week">Upcoming week</h3>
<ul>
<li>Help with stabilizing quarterly goal for next quarter for 2i2c.</li>
<li>Finish two incident reports for UToronto so we can close that out:
<ul>
<li><a href="https://github.com/2i2c-org/infrastructure/issues/2628">https://github.com/2i2c-org/infrastructure/issues/2628</a></li>
<li><a href="https://github.com/2i2c-org/infrastructure/issues/2594">https://github.com/2i2c-org/infrastructure/issues/2594</a></li>
</ul>
</li>
<li>See this PR through to completion: <a href="https://github.com/2i2c-org/infrastructure/pull/2406">https://github.com/2i2c-org/infrastructure/pull/2406</a>. Mostly documentation.</li>
<li>See this PR through to completion: <a href="https://github.com/2i2c-org/infrastructure/pull/2621">https://github.com/2i2c-org/infrastructure/pull/2621</a>. Mostly <em>upstream</em> documentation, started in <a href="https://github.com/jupyterhub/grafana-dashboards/pull/84">https://github.com/jupyterhub/grafana-dashboards/pull/84</a>.</li>
<li>Finish moving cloudbank hubs to filestore, decomission old NFS VMs. <a href="https://github.com/2i2c-org/infrastructure/issues/1105">https://github.com/2i2c-org/infrastructure/issues/1105</a></li>
</ul>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/drive/">Something that seems to drive me: Part I</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2023-02-25 </span>
      <div class="post-category">
          <a href="/categories/personal/"> personal </a>
          <a href="/categories/drive/"> drive </a>
          </div>
        <span class="more-meta"> 456 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I&rsquo;ve had a bit of a slump the last few months, working through what feels
like deep mental fog for totally unclear reasons. The lack of clarity on
causation is one of the most frustrating parts of this, and one of the
most familiar too - this isn&rsquo;t the first time I&rsquo;ve felt like this, and I know
(rationally at least, if not emotionally) it won&rsquo;t be the last. Probably a
combination of intensely avoiding making some decision that seems too big
to be made by me without actually knowing what it is and fun brain chemicals
stuff. Who knows, I&rsquo;ve given up on trying to figure out causality for these
things for the most part.</p>
<p>One of the effects has been a distinct lack of drive, at least to the extent
I am used to. Another is that it is difficult to remember being in a different
emotional state in the past, and difficult to imagine being in a different
emotional state in the future. Time dissolves, and I believe how I feel now
is how I have always felt, and how I will always feel.</p>
<p>Hence, am trying to make <em>external</em> records any time I feel or encounter
something that seems to give me a good boost, and a sense of &lsquo;wanting to
do it again&rsquo;. That in a loop feels like drive to me - A feeling induced in you
by external stimuli, and then you wanna find things to do to feel that again.</p>
<p>I felt some of that a few days ago! I built something, put out a quick
message about what it is that I had built on a slack. Someone responded with
this message:</p>
<p><img src="/images/this-is-mindblowing.png" alt="A screenshot from Slack of the message &lsquo;This is &rsquo;"></p>
<p>And <strong>that</strong> felt really good! I could see how responses like this have driven
most of my software development projects, for good and ill. It has been a driver
in picking which communities I can be a part of, what I find interesting, and
what feels like a slog. I definitely find communities that are at intersections
of various fields, and I try to find them early - so things I could do that
would feel &rsquo;normal&rsquo; in one of those fields feels mind blowing to the other.
I joked to a friend that my &lsquo;anxiety response&rsquo; is to
start (or get deeply involved in) a new open source projects, but the more
I think about it the more it seems to be not a joke at all.</p>
<p>Not unique to myself in any way or form I would assume.
But feels great to know this is true for me, and I have come to value explanations
for my emotions quite a bit of late :)</p>
<p>Anyway, great to remember that I can feel this!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/first-turn/">First Turn</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-12-09 </span>
      <div class="post-category">
          <a href="/categories/hardware/"> hardware </a>
          <a href="/categories/tools/"> tools </a>
          </div>
        <span class="more-meta"> 549 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I walked into a local hardware store, with the following thought in my mind:</p>
<blockquote>
<p>I need a 5mm metric hex key</p>
</blockquote>
<p>And I wandered around aimlessly as I do in stores, almost bought some double
sided tape for a different project (decided against it), and eventually made it
to the place with all the sockets, hex keys, screwdrivers, etc.</p>
<p>Words that previously meant nothing to me (Torx, SAE, metric) made <em>sense</em>. Felt
a little like the very first time I felt power learning to write code (the strongest
memory is that of changing color of a button in VB6 with one line of code). What was
noise before had meaning now.</p>
<p>I got myself a little folding metric key set with hex keys going from 1mm to 6mm - I
knew I had some new windscreen clip-ons that needed a 4mm key, and am sure I&rsquo;ll find a 6mm
somewhere.</p>
<p>I pick up something that costs 13$, and looks ok. I look at a different brand, and decide
I like that better because of the way it folds. &ldquo;Hey, this means when I try to turn it,
I&rsquo;ll get better leverage!&rdquo;. I <em>actually</em> know what that sentence means, and I choose one
brand over another <em>based on actual knowledge</em> rather than a guess. If my programming
experience is anything to go by, I&rsquo;m completely wrong in ways I won&rsquo;t even understand for
a long time.</p>
<p>But I buy it, leave the store, and try using it for intended purpose on my motorcycle -
to remove the bolts holding my bar end weights in. Earlier that week, I had stripped these
by attempting to use a friend&rsquo;s impact driver with a torx bit (it sort of fit, and I had
no mental model about what I was doing!). The head stripped, and the thread stripped, and
I took it to Performance Motorcycles in Berkeley who fixed it up for me (although the bolt
itself did break and they had to put a new one in).</p>
<p>I had since beat myself up about not knowing enough about hardware to not strip the head,
been comforted by a friend, realized that I had set weird standards for myself where somehow
I must already know all of this having never put in any <em>effort</em> to learn, and then being
delighted that &lsquo;oh wait this is just another skillset I can pick up&rsquo;. It will probably take
years, but that&rsquo;s ok!</p>
<p>Earlier that day, I had went back to the mechanic and asked him exactly what screw he had
used for the bolt. He told me it was a 5mm hex, and I should use an exact one or I will strip.</p>
<p>I extend the 5mm key, and fit it in. It seems to be a perfect fit! I try twisting left,
repeating internally to myself &ldquo;Lefty loosy&rdquo;. It doesn&rsquo;t budge, and I&rsquo;m slightly anxious.
But I trust that it is not super likely to strip at this point - I&rsquo;m not a very strong person,
and this I fully believed was the correct size. So I put more energy into it.</p>
<p>AND THE BOLT TURNS! I FEEL ELATED! AMAZING JOY! It is a bit like seeing your code run for
the first time, AND IT FEELS AWESOME!</p>
<p>So excited for this future :)</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/no-touch-nfs/">JupyterHub tip: Don&#39;t touch NFS unless you must</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-11-07 </span>
      <div class="post-category">
          <a href="/categories/z2jh/"> z2jh </a>
          <a href="/categories/jupyterhub/"> jupyterhub </a>
          <a href="/categories/nfs/"> nfs </a>
          </div>
        <span class="more-meta"> 206 words </span>
        <span class="more-meta"> 1 min read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>If you are running a <a href="https://z2jh.jupyter.org">JupyterHub on Kubernetes</a> and
use NFS for home directory storage (a common occurance), I highly recommend the
following settings:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">singleuser</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">extraEnv</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># notebook server writes secure files that don&#39;t need to survive a</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># restart here. Writing &#39;secure&#39; files on some file systems (like</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Azure Files with SMB or NFS) seems buggy, so we just put runtime dir on</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># /tmp. This is ok in our case, since no two users are on the same</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># container.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">JUPYTER_RUNTIME_DIR</span><span style="color:#111">:</span> <span style="color:#ae81ff">/tmp/.jupyter-runtime</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">extraFiles</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ipython_kernel_config.json</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">mountPath</span><span style="color:#111">:</span> <span style="color:#ae81ff">/usr/local/etc/ipython/ipython_kernel_config.json</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">data</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># This keeps a history of all executed code under $HOME, which is almost always on</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># NFS. This file is kept as a sqlite file, and sqlite and NFS do not go together very</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># well! Disable this to save ourselves from debugging random NFS oddities that are caused</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># by this unholy sqlite + NFS mixture.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">HistoryManager</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">enabled</span><span style="color:#111">:</span> <span style="color:#00a8c8">false</span>
</span></span></code></pre></div><p>These aren&rsquo;t specific to kubernetes, but to NFS (or AzureFile, or any other shared
filesystem). sqlite and NFS <em>do not mix</em>, and you&rsquo;ll run into weird errors you will not
be able to really debug. Save yourself the pain :) Let your users know too, and tell them to
not put sqlite databases on NFS.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/conda-forge-github-actions/">Installing Python (and other packages) from conda-forge in GitHub Actions</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-11-06 </span>
      <div class="post-category">
          <a href="/categories/github/"> github </a>
          <a href="/categories/code/"> code </a>
          <a href="/categories/conda-forge/"> conda-forge </a>
          </div>
        <span class="more-meta"> 237 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p><a href="https://hachyderm.io/web/@asm@qoto.org/109294147156073488">Alex Merose asked me</a> on Mastodon how to
best set up a conda environment on GitHub Actions. I thought I&rsquo;d write a short blog post about it!</p>
<p>The short version is, use the <a href="https://github.com/marketplace/actions/setup-miniconda">conda-incubator/setup-miniconda</a>
GitHub action instead of the official <a href="https://github.com/marketplace/actions/setup-python">setup-python</a>
action. Specifically, try out these options for size:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">steps</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">uses</span><span style="color:#111">:</span> <span style="color:#ae81ff">conda-incubator/setup-miniconda@v2</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">with</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Specify python version your environment will have. Remember to quote this, or</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># YAML will think you want python 3.1 not 3.10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">python-version</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;3.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># This uses *miniforge*, rather than *minicond*. The primary difference is that</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># the defaults channel is not enabled at all</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">miniforge-version</span><span style="color:#111">:</span> <span style="color:#ae81ff">latest</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># These properties enable the use of mamba, which is much faster and far less error</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># prone than conda while being completely compatible with the conda CLI</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">use-mamba</span><span style="color:#111">:</span> <span style="color:#00a8c8">true</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">mamba-version</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;*&#34;</span>
</span></span></code></pre></div><p>This should give you a python environment named <code>test</code> with python <code>3.10</code> (or whatever version
you specify) and nothing much else. You can then use <a href="https://github.com/mamba-org/mamba"><code>mamba</code></a>
to install packages from <a href="https://conda-forge.org/">conda-forge</a> to your heart&rsquo;s content in future
steps like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    - <span style="color:#f92672">name</span><span style="color:#111">:</span> <span style="color:#ae81ff">Install some packages</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># The `-l` is needed so conda environment activation works correctly</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">shell</span><span style="color:#111">:</span> <span style="color:#ae81ff">bash -l {0}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span><span style="color:#111">:</span> <span style="color:#111">|</span><span style="color:#d88200">
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        mamba install -c conda-forge numpy scipy matplotlib</span>        
</span></span></code></pre></div><p>My recommendation is to continue using the default <code>setup-python</code> action for almost all your python
needs in GitHub actions, and use <code>conda-incubator/setup-miniconda@v2</code> only if you explicitly need
to use <code>mamba</code> (or <code>conda</code>) for something.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/python-in-github-actions/">Using Python (instead of bash) to write GitHub actions</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-11-01 </span>
      <div class="post-category">
          <a href="/categories/python/"> python </a>
          <a href="/categories/code/"> code </a>
          <a href="/categories/github/"> github </a>
          </div>
        <span class="more-meta"> 306 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I am not smart enough to consistently write <em>and</em> debug shell scripts that use <em>any</em>
conditional or looping constructs. So as soon as I&rsquo;m writing something in bash that
requires use of those, I switch to python. This works fine when writing scripts, but
what to do when writing <a href="https://github.com/features/actions">GitHub Actions</a> workflows?
You can only write bash in <code>run:</code> stanzas in your <code>step</code>s, right?</p>
<p>Not at all! You can set the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsshell">shell</a>
parameter to anything you want, and the contents of <code>run</code> will be passed to the shell in the
form of a file. This allows you to use not just Python, but basically any langauge when writing
your GitHub actions workflows.</p>
<p>Here is an example step that used python.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">steps</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span><span style="color:#111">:</span> <span style="color:#ae81ff">Something in python!</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># The -u means &#39;unbuffered&#39;, so print() statements in your python code are output correctly</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># otherwise, they might be out of order with stdout from commands your code calls</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># {0} is replaced with the name of the temporary file GitHub Actions creates with</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># the contents of the run:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">shell</span><span style="color:#111">:</span> <span style="color:#ae81ff">python -u {0}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span><span style="color:#111">:</span> <span style="color:#111">|</span><span style="color:#d88200">
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        import sys
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        import subprocess
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        print(&#34;Hello, I am python&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        # We have to use string substitution for getting inputs, which is bad and ugly
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        # However, it isn&#39;t as bad me trying to write conditionals in bash.
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        # It might be possible to use environment values here, I haven&#39;t explored.
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        variable = &#39;${{ inputs.some_input }}&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        # Use subprocess.check_call to call out to external process. stdout is
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        # handled correctly
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        subprocess.check_call([
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">          sys.executable,
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">          &#39;-m&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">          &#39;pip&#39;, &#39;install&#39;, &#39;django&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#d88200">        ])</span>        
</span></span></code></pre></div><p>If you instead use <code>mamba</code> or <code>conda</code> to set up your Python, perhaps with
the <a href="https://github.com/marketplace/actions/setup-miniconda">setup-miniconda</a>
action, you need to set <code>shell: bash -l -c &quot;python -u {0}&quot;</code>. The <code>bash -l</code>
makes sure that the appropriate conda environment is loaded, and then passes
off to the &lsquo;correct&rsquo; python.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/motorcycle-ride-report-2022-06-19/">Motorcycle Ride Report 2022 06 19</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-21 </span>
      <div class="post-category">
          <a href="/categories/motorcycle/"> motorcycle </a>
          </div>
        <span class="more-meta"> 956 words </span>
        <span class="more-meta"> 5 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I decided to write publicly and publish my motorcycle riding trip notes now.</p>
<h2 id="montarey-trip-notes">Montarey Trip notes</h2>
<p>Need to learn to plan when to <em>pee</em>. This is important to do! Can&rsquo;t just get off any
exit, as that often doesn&rsquo;t actually lead to wilderness but to more concrete jungles.</p>
<p>Need to learn more about lane splitting and how and <em>when</em> to do it safely. I did it
for a little bit while stuck on CA-1S, but was avoiding it for most of the ride. Feels
like it&rsquo;s only safe to do when traffic is almost at a standstill, and I can go at least
5mph faster than traffic. Also, I don&rsquo;t wanna get hit by other motorcyclists lanesplitting.
More research needed.</p>
<p>I need to adjust my levers to see if it helps with my skin near thumb getting sore.</p>
<p>Get a different seat maybe for more comfort? My butt does hurt and is sore.</p>
<p>I definitely need to feel much more confident in curves. Taking the TC class is a good
next step.</p>
<p><strong>DO NOT BELIEVE GOOGLE MAPS TIME ESTIMATES!!</strong> I am much slower than that haha.</p>
<p>I need to work on my core strenght, back to the Gym. I think without that, long rides
are going to be painful.</p>
<p>Need to plan <em>meals</em> better too. I&rsquo;m eating &rsquo;lunch&rsquo; at like 4:30, after having only eaten
3/4 cup of oats and 1 butter croissant all day. That isn&rsquo;t enough. Partially this is because
I couldn&rsquo;t leave on time either - as usual. Still meant I left at 12 rather than 2 - but could&rsquo;ve
left at 10!</p>
<h3 id="post-trip-notes">Post trip notes</h3>
<p>This is at night. The ride back was all interstate, and quite different!</p>
<ol>
<li>
<p><strong>Food</strong> makes a <em>huge</em> difference. I think I need to eat more than I think too. Just everything
was better after food. I should just always eat, and eat on time.</p>
</li>
<li>
<p>I am getting more confident about turns at speed. I think by default I end up slowing down
for each turn from fear. That is pretty dangerous! I need to have a better understanding of
how much traction is available, and just turn. Which way to lean is also important - but
I think my current intuition (counter lean or neutral) is good enough for me. I saw some
guy shred the twisties when I was up in the berkeley hills, and he had to lean quite a
bit. Not what I&rsquo;m doing though.</p>
<p>I should <strong>take more classes</strong> and read the total control book properly. Towards the end
I was feeling pretty confident, and that was quite nice!</p>
</li>
<li>
<p>The way back was north, with the sun directly into my eyes for almost an hour. Was intense,
I could barely see! I had sunvisor down and transition glasses and that wasn&rsquo;t enough at
all. I was in a trance. Looking back, how did I trust myself enough to go through that?!
Would I have been able to see hazards on the road? Stopped cars? I was able to control
speed pretty well. I was a bit tired too. But I did Montarey to San Jose in one go,
and stopped - my body basically forced me to stop and rest. I don&rsquo;t entirely know how
I feel about this. I think it was mostly safe, as it was just on the interstate and I
was on the left-ish lane. I also think I could actually mostly see - what I see in
my memory now, hours after the fact, doesn&rsquo;t seem quite right - feels filtered. It really
was just an intense trance. I don&rsquo;t mind interstate riding.</p>
</li>
<li>
<p>I should strap my bag down and not carry it! I think that will definitely help my back
hurt a lot less. I had 2 bottles of water, laptop and ipad - I think that&rsquo;s a lot.
I should consider a smaller bag too.</p>
</li>
<li>
<p>A more comfortable seat would also help. My butt was pretty sore.</p>
</li>
<li>
<p>Physical strength is an important component of safety, and I <em>must</em> get back to the gym.
Particularly, while turning I could feel my core was not strong enough several times,
and I would like more trust in my muscle strenghts.</p>
</li>
<li>
<p>I lane-split a little! Just for parts of CA-17S, when in otherwise almost stopped
traffic. I need to learn way more about it.</p>
</li>
<li>
<p>I should understand trail braking better. I think my understanding of it right now
is dangerously flawed, as it contributes to me slowing down excessively in turns. Could
get rear ended.</p>
</li>
<li>
<p>Really need a windshield. I can hardly even look at my mirrors in the interstate, because
I can&rsquo;t bring my torso up at all.</p>
</li>
<li>
<p>I drifted into next lane almost in one turn I think because I wasn&rsquo;t braking and
I was tired. I was trying to &lsquo;push through&rsquo; and at some point even didn&rsquo;t want to break
in San Jose. WTF was that, compromising safety for challenge! No way.</p>
</li>
<li>
<p>I need to leave earlier so I can have more time at my target spaces. In fact, I should
look for nice target spaces first and then travel - flip my currnet model a little. I
don&rsquo;t think I need to just haul miles anymore. Past that stage now.</p>
</li>
<li>
<p>The bananas in my backpack were smushed to death and the inside of my backpack is a banana
smoothie. Would not recommend</p>
</li>
</ol>
<h3 id="todos">TODOs</h3>
<p>Concrete action items!</p>
<ol>
<li>Always eat before a ride</li>
<li>Get a better helmet. I&rsquo;ve spent months looking for the right one, time to look again :(</li>
<li>Start going through <a href="https://ridelikeachampion.com/courses-page/">Champ U</a> that I
already bought</li>
<li>Look for another intermediate mototrcycling course I can take.</li>
<li>Plan time at conclusion of journey better.</li>
<li>Get a windshield for the bike.</li>
<li>Experiment with getting luggage off my back</li>
</ol>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/show-hide-terminal-vscode/">Shortcut to Show / Hide Terminal in Visual Studio Code</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-01-06 </span>
      <div class="post-category">
          <a href="/categories/code/"> code </a>
          <a href="/categories/vscode/"> vscode </a>
          <a href="/categories/customization/"> customization </a>
          </div>
        <span class="more-meta"> 144 words </span>
        <span class="more-meta"> 1 min read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I wanted a single keyboard shortcut that would let me switch between the built-in
terminal and the editor in vscode. I couldn&rsquo;t find any, so I made a short macro
using the <a href="https://marketplace.visualstudio.com/items?itemName=geddski.macros">VSCode Macros Extension</a></p>
<p>First, you define your macros in <code>settings.json</code>. You can open up vscode settings
with <code>Cmd+,</code>, search for <code>macros</code>, and edit this under <code>Macros: List</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#d88200">&#34;macros.list&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;showTerminal&#34;</span><span style="color:#111">:</span> <span style="color:#111">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#d88200">&#34;workbench.action.terminal.toggleTerminal&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#d88200">&#34;workbench.action.terminal.focus&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#d88200">&#34;workbench.action.toggleMaximizedPanel&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;hideTerminal&#34;</span><span style="color:#111">:</span> <span style="color:#111">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#d88200">&#34;workbench.action.toggleMaximizedPanel&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#d88200">&#34;workbench.action.terminal.toggleTerminal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span>
</span></span></code></pre></div><p>Then you can bind a keyboard shortcut to it. Open <code>Preferences: Open Keyboard Shortcuts (JSON)</code>
from the command palette, and add this:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>    <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;key&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;cmd+t&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;command&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;macros.showTerminal&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;when&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;!terminalFocus&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;key&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;cmd+t&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;command&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;macros.hideTerminal&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;when&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;terminalFocus&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">}</span><span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><p><code>showTerminal</code> gets called when you are focused anywhere in the editor except
your terminal, and <code>hideTerminal</code> gets called when you are focused on your
terminal. This gives me the &rsquo;toggle&rsquo; behavior I want.</p>

  </div>
</article>

    </section>
  
  <nav class="pagination">
    
    <a class="next" href="/page/2/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme -
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy;
    2005 -
    2024
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Yuvi</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.1c70606d1b733282f06230615f5561b5894924b6f9930ba2ab99cf1254f75a1a.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
