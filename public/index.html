<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Yuvi Panda</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Yuvi Panda" /><meta name="description" content="Project Jupyter contributor | Free Culture enthusiast" /><meta name="keywords" content="yuvi, yuvipanda" />






<meta name="generator" content="Hugo 0.75.1 with theme even" />


<link rel="canonical" href="https://words.yuvi.in/" />
  <link href="https://words.yuvi.in/index.xml" rel="alternate" type="application/rss+xml" title="Yuvi Panda" />
  <link href="https://words.yuvi.in/index.xml" rel="feed" type="application/rss+xml" title="Yuvi Panda" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.fd028de9698f3177a6c19af3f7e269107c2710dd1eaf98d83106b3ad594c81c6.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">



<link rel="stylesheet" href="/lib/fontawesome-free-5.13.1-web/css/all.min.css">

<meta property="og:title" content="Yuvi Panda" />
<meta property="og:description" content="&lt;a href=&#39;https://jupyter.org&#39;&gt;Project Jupyter&lt;/a&gt; contributor | &lt;a href=&#39;https://en.wikipedia.org/wiki/Free-culture_movement&#39;&gt;Free Culture&lt;/a&gt; enthusiast" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://words.yuvi.in/" />
<meta property="og:updated_time" content="2020-11-09T02:15:15+05:30" />
<meta itemprop="name" content="Yuvi Panda">
<meta itemprop="description" content="&lt;a href=&#39;https://jupyter.org&#39;&gt;Project Jupyter&lt;/a&gt; contributor | &lt;a href=&#39;https://en.wikipedia.org/wiki/Free-culture_movement&#39;&gt;Free Culture&lt;/a&gt; enthusiast">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Yuvi Panda"/>
<meta name="twitter:description" content="&lt;a href=&#39;https://jupyter.org&#39;&gt;Project Jupyter&lt;/a&gt; contributor | &lt;a href=&#39;https://en.wikipedia.org/wiki/Free-culture_movement&#39;&gt;Free Culture&lt;/a&gt; enthusiast"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Yuvi Panda</a>
  <div class='logo-site-description'><a href='https://jupyter.org'>Project Jupyter</a> contributor | <a href='https://en.wikipedia.org/wiki/Free-culture_movement'>Free Culture</a> enthusiast
  </div>
</div>

<div class="logo-social">
      <a href="mailto:yuvipanda@gmail.com" class="fas fa-envelope" title="envelope"></a>
      <a href="https://twitter.com/yuvipanda" class="fab fa-twitter" title="twitter"></a>
      <a href="https://github.com/yuvipanda" class="fab fa-github" title="github"></a>
  <a href="https://words.yuvi.in/index.xml" type="application/rss+xml" class="fas fa-rss" title="rss"></a>
</div>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <section id="posts" class="posts">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/hub-interfaces/">JupyterHub for all tools</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-11-09 </span>
      <div class="post-category">
          <a href="/categories/code/"> code </a>
          </div>
        <span class="more-meta"> 792 words </span>
        <span class="more-meta"> 4 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>JupyterHub was designed to provide multi-user access to Classic Jupyter notebook and JupyterLab, running on machines far away with access to data &amp; compute your local machines don&rsquo;t have. However, there are a <em>lot</em> of users this leaves out - R users on RStudio, folks who prefer <code>ssh</code> based interfaces, people on local IDEs like vscode or pycharm, etc. We trust that these users know better than &lsquo;us&rsquo; developers &amp; admins what user interface works best for them, and make sure that our JupyterHub setups work for them.</p>
<p>I propose that we try provide the following in all JupyterHub setups, but particularly on cloud-based deployments focused on research.</p>
<ol>
<li>
<p>Arbitrary web applications on the browser, not just classic notebook &amp; JupyterLab. This could be RStudio / Shiny for R folks, <a href="https://github.com/fonsp/Pluto.jl">Pluto.jl</a> for Julia folks, <a href="https://theia-ide.org/">Theia IDE</a> or <a href="https://github.com/cdr/code-server">vscode</a> for arbitrary languages, etc. These need to be first class citizens with amazing support. <a href="https://github.com/jupyterhub/jupyter-server-proxy/">jupyter-server-proxy</a> does a lot of this already - but still needs to be &lsquo;set up&rsquo; in your deployment. DO IT!</p>
</li>
<li>
<p><code>ssh</code> support, so you can <code>ssh yuvipanda@myhub.org</code>, and have it work as you would expect. It should have the same environment &amp; home directories as your browser based sessions. Along with something like <a href="https://words.yuvi.in/post/kbatch/">kbatch</a>, this could let folks who like their current HPC style workflows keep it. SFTP for file transfer, SSH Tunneling, scripting via command execution, etc should also come along with this, allowing re-use with a vast array of existing tools &amp; workflows.</p>
</li>
<li>
<p>Connecting from local IDEs, for notebook execution. The Jupyter protocol is designed to work with a variety of frontends, and many IDEs support connecting directly to a Jupyter kernel - <a href="https://code.visualstudio.com/docs/python/jupyter-support">Visual Studio Code</a>, <a href="https://www.jetbrains.com/help/pycharm/jupyter-notebook-support.html">PyCharm</a>, <a href="https://medium.com/@halmubarak/connecting-spyder-ide-to-a-remote-ipython-kernel-25a322f2b2be">spyder</a>, <a href="https://github.com/nnicandro/emacs-jupyter">emacs</a>, etc. There is already decent-ish support for this, but would be nice to explicitly document, bugfix and promote this to users.</p>
</li>
<li>
<p>Connecting from local IDEs for a full remote development environment. Connecting to a remote Jupyter kernel often doesn&rsquo;t give you all that you want from your IDE - no access to remote filesystem, limited access from other IDE features (version control, global find, etc). Many IDEs offer a &lsquo;remote development&rsquo; experience that gives you all this, and usually requiring just a few SSH features to work. VSCode&rsquo;s <a href="https://code.visualstudio.com/docs/remote/remote-overview">remote development</a> feature is very well done, popular and <strong>not open source</strong>, but we should support it. <a href="https://blog.jetbrains.com/pycharm/2018/04/running-flask-with-an-ssh-remote-python-interpreter/">PyCharm</a> supports this, and Emacs' <a href="https://www.emacswiki.org/emacs/TrampMode">TRAMP</a> is highly rated as well.</p>
</li>
</ol>
<p>You might not need some of these in your deployment - for example, you might have no R users, rendering RStudio not very useful. However, I think the world is getting more and more polyglot, and we need to move with it. Consider deploying these, even if your users don&rsquo;t explicitly ask for it - I suspect many will use it once it is there. &lt;3</p>
<h2 id="work-to-be-done">Work to be done</h2>
<p>There&rsquo;s a lot of work to be done here to make this all a great experience.</p>
<ol>
<li>Documentation and publicity for <a href="https://github.com/jupyterhub/jupyter-server-proxy/">jupyter-server-proxy</a>. For example, this <a href="https://github.com/jupyterhub/jupyter-rsession-proxy/">README</a> is all the docs that exist on how to set up RStudio to work in your JupyterHub. This is low hanging fruit with huge impact. Same for running remote <a href="https://github.com/yuvipanda/jupyter-desktop-server/">desktop applications</a>, <a href="https://github.com/IllumiDesk/jupyter-pluto-proxy">Pluto.jl</a>, and many many others.</li>
<li>Work on <a href="https://github.com/yuvipanda/jupyterhub-ssh">jupyterhub-ssh</a>. Aims to provide full SSH support - terminal emulation, command execution, tunneling and SFTP. This would go a long way in supporting (2) and (4) above. It sortof-kinda works now, but effort poured into it will be well spent. I long for a day when setting this up would be as simple as setting up z2jh or TLJH, and it actually isn&rsquo;t that far away if effort is put into it.</li>
<li>More outreach to non-Jupyter communities about levaraging JupyterHub for their workflows. The name &lsquo;Jupyter&rsquo; in &lsquo;JupyterHub&rsquo; is no longer fully accurate, given all the other things that can be run with it. We should reach out to other communities and &lsquo;bring them into the fold&rsquo;, so to speak - so their workflows, desires and bugs can drive development.</li>
<li>A unified setup guide for &lsquo;research hubs&rsquo;, that guides first-time admins through setting these up - including great documentation. A <code>z2jh for research hubs on the cloud</code> would be extremely well received I believe.</li>
</ol>
<h2 id="will-you-help">Will you help?</h2>
<p>I&rsquo;ve been talking to <a href="https://predictablynoisy.com/">Chris Holdgraf</a> a lot on how to go about getting folks into doing stuff like this. I see two primary options:</p>
<ol>
<li>Get funding from various entities (foundations, universities, corporations, etc) for folks to do this. Hopefully <a href="https://2i2c.org/">2i2c</a> can be a vehicle for this.</li>
<li>Pour a lot more effort into getting more new developers into JupyterHub development than we are now. This would mean things like participating in Google Summer of Code, Outreachy, development sprints in various conferences, etc.</li>
</ol>
<p>Would love to hear thoughts from you, dear reader :) Email <code>yuvipanda@gmail.com</code>.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/kbatch/">kbatch: sbatch, but for kubernetes</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-11-01 </span>
      <div class="post-category">
          <a href="/categories/code/"> code </a>
          </div>
        <span class="more-meta"> 639 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>Submitting &lsquo;non-interactive&rsquo; jobs that can run independent of a user&rsquo;s current
session on a JupyterHub is a pressing problem. There are many many solutions to
this, but I think there&rsquo;s a lot of value in having an <em>extremely</em> simple
solution that solves exactly one extremely well defined problem.</p>
<p>We will only consider JupyterHubs running on top of Kubernetes, since that has all the actual capabilities we need to solve this problem. We only need to have a UX wrapper around it.</p>
<h2 id="problem-to-solve">Problem to solve</h2>
<blockquote>
<p>If my JupyterHub session is terminated, all the code running there dies -
including any dask sessions I might have - even though they are handled
externally by dask-gateway.</p>
</blockquote>
<p>This is trivially accomplished in batch scheduling systems like <code>slurm</code>, but
JupyterHub doesn&rsquo;t have a <em>simple</em> paradigm for it. It would be very, very
useful for it to have one.</p>
<h2 id="stealing-from-slurm">Stealing from slurm</h2>
<p>Slurm has the <a href="https://slurm.schedmd.com/sbatch.html">sbatch</a> command for submitting jobs, and the <a href="https://slurm.schedmd.com/squeue.html">squeue</a> command for viewing job information. They have a large number of options that can do extremely complicated things - but I <em>think</em> we can copy a tiny subset of their functionality to solve our specific problem. We will not be copying all its behaviors, nor try to be compatible with it - just be <em>inspired</em>.</p>
<h3 id="kbatch"><code>kbatch</code></h3>
<p><code>kbatch</code> would be an equivalent to <code>sbatch</code> - just submitting jobs. You can specify the resources your job would need (CPUs, memory, GPUs, etc), give it a script to execute, and it&rsquo;ll just submit it and return. Nothing more! At least to begin with, it wouldn&rsquo;t have a lot of the complex features <code>sbatch</code> has - no array tasks, no multi-step jobs, etc. It would just be a script (or a notebook) that can run <em>independent of the current notebook session</em>. If you want parallelism, you should use dask from this script.</p>
<p>Other names for this could be something like <code>ksubmit</code> or <code>kbackground</code> or similar - the core thing it does is to <code>submit jobs</code>.</p>
<p>Options this command would have:</p>
<ol>
<li>Script (or notebook to run)</li>
<li>Resources it needs (CPU, memory, GPU, etc)</li>
<li>Where to send stdout / stderr (by default, mimic <code>sbatch</code> behavior and put it on your homedir)</li>
<li>Job name / comment for you to keep track of it</li>
</ol>
<p>Users shouldn&rsquo;t have to specify environment or home directories - these should be automatically detected to match current JupyterHub notebook environment. We could probably allow <code>KBATCH</code> commands in the script, similar to <code>SBATCH</code> commands - but more conversation with people who actually use this is needed :)</p>
<h3 id="kqueue"><code>kqueue</code></h3>
<p><code>kqueue</code> would let you check in on the status of your jobs - wether they were running, stopped, failed, etc.</p>
<p>That&rsquo;s it. I think just with these two, we can provide users the ability to run background jobs, from the commandline, similar to how they do so with slurm. We can eventually write GUIs for this fairly easily, since the functionality provided by them is quite simple.</p>
<h3 id="extra-features">Extra features?</h3>
<p>We can easily add more features - tailing logs, getting a shell into your running job to poke around, array jobs, etc. But it would be very nice if we can keep it a simple tool that can be marked <em>complete</em> once it solves the very specific problem it set out to solve.</p>
<h2 id="implementation">Implementation</h2>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/job/">Kubernetes Jobs</a> provide literally everything we need. We will write a simple python application that uses the kubernetes API to do everything. All meta-information will be stored as labels in the Kubernetes Job object, and the python application will be responsible for providing the appropriate UX to our users.</p>
<h2 id="caveats">Caveats</h2>
<p>This is <em>extremely</em> simple, and isn&rsquo;t meant for more complex DAG use cases. For those, look at something like Airflow or Prefect or any of the million other things that exist. This is a small UX improvement over <code>kubectl</code>, basically.</p>
<p>Now, let&rsquo;s go do it!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/production-tljh/">Setting up a &#34;Production Ready&#34; TLJH</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-09-16 </span>
      
        <span class="more-meta"> 868 words </span>
        <span class="more-meta"> 5 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p><a href="http://tljh.jupyter.org/">The Littlest JupyterHub</a> is an extremely
capable hub distribution that I&rsquo;d recommend for situations where you
expect, on average, under 100 active users.</p>
<h2 id="why-not-kubernetes">Why not Kubernetes?</h2>
<p>The primary reason to use Zero to JupyterHub on k8s over TLJH in cases with smaller
number of users would be to reduce costs - Kubernetes can spin down nodes when
not in use. However, you&rsquo;ll always have at least one node running - for the hub
/ proxy pods. The extra complexity that comes with it is not worth it - particulary
around needing to build your own docker images - is not worth it. TLJH works perfectly
well for these cases!</p>
<h2 id="what-is-production">What is &lsquo;production&rsquo;?</h2>
<p>A JupyterHub that you can run itself securely without lots of intervention
from the person who created it is what I&rsquo;ll call a <em>production-ready</em> JupyterHub.
It&rsquo;s a pretty arbitrary standard. In this blog post, I&rsquo;ll lay out what <strong>I</strong> want
in the TLJH hubs I run before I let users on them.</p>
<h2 id="authentication">Authentication</h2>
<p>Uses a <em>real</em> <a href="https://tljh.jupyter.org/en/latest/howto/index.html#authentication">Authenticator</a>,
not the default <code>FirstUseAuthenticator</code>. The default authenticator is pretty insecure,
and should really not be used. If you don&rsquo;t know what to use, I&rsquo;ll suggest the Google or
GitHub authenticators.</p>
<h2 id="https">HTTPS</h2>
<p>Enable <a href="https://tljh.jupyter.org/en/latest/howto/admin/https.html">HTTPS</a>. An absolute
requirement, TLJH makes it quite easy. You <em>do</em> need to get a domain for this to work,
which can be a source of friction. Totally worth it, and many authenticators require
this too.</p>
<h2 id="resource-limits">Resource Limits</h2>
<p>In many systems, a single user can often write code that accidentally crashes the whole system.
By default, TLJH protects against this by enforcing <a href="https://tljh.jupyter.org/en/latest/topic/tljh-config.html#user-server-limits">memory limits</a>.
I think the default is a 1G limit, but you should tune it to fit your own users. TLJH
has more documentation on <a href="">how to estimate your VM size</a>
based on your expected usage patterns.</p>
<h2 id="sizing-your-vm-correctly">Sizing your VM correctly</h2>
<p>If you choose a VM that&rsquo;s too big, you&rsquo;ll end up spending a lot of cash for unused
resources. If it&rsquo;s too small, your users will not have the resources they need to
do their work. TLJH provides <a href="https://tljh.jupyter.org/en/latest/howto/admin/resource-estimation.html">some helpful docs</a>
estimating your VM size, and you can always <a href="https://tljh.jupyter.org/en/latest/howto/admin/resize.html">resize</a>
your VM afterwards if you get it wrong.</p>
<h2 id="disk-backups">Disk backups</h2>
<p>TLJH contains everything on the VM&rsquo;s disk - your user environment, users' home directories,
current hub configuration, etc. It is very important you back this up, to recover in case
of disasters. Automated disk snapshots from your cloud provider are an easy way to do this.
Most major cloud providers offer a way to do this - <a href="https://cloud.google.com/compute/docs/disks/create-snapshots">Google Cloud</a>,
<a href="https://www.digitalocean.com/docs/images/snapshots/">Digital Ocean</a>, <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html">AWS</a>,
etc. Some let you automate it as well - Google &amp; AWS certainly do, I&rsquo;m not sure about other
clodu providers. This isn&rsquo;t the <em>best</em> way to do backup - there&rsquo;s approximately
1 billion ways to do so. However, this is an absolute minimum, and it might just be enough.</p>
<p>If you want to be more fancy, I&rsquo;d suggest using a separate disk / volume for your user home
directories, possibly on <a href="https://wiki.ubuntu.com/ZFS">ZFS</a>, and snapshot much more
aggressively. Talk to your nearest google search bar for your options.</p>
<h2 id="pin-your-public-ip">Pin your public IP</h2>
<p>Some cloud providers often your VM&rsquo;s public IP address if you start / stop them. This
can be pretty bad - you&rsquo;ll have to change your domain&rsquo;s DNS entry, and re-aquire HTTPS.
A hassle! You can tell your cloud provider to hang on to your IP even if your VM
goes down / changes. And you should! DigitalOcean doesn&rsquo;t require this,
but <a href="https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address">google does</a>.
I think AWS does too, but I&rsquo;m not sure how you can reserve the public IP for it -
since it&rsquo;s usually a domain name itself.</p>
<h2 id="base-environment-setup--snapshot">Base environment setup + snapshot</h2>
<p>TLJH has a shared conda environment that is used by <em>all</em> users. Everyone can read
from it, but only users who are <code>admin</code> can write to it (via <code>sudo</code>). This is one of
TLJH&rsquo;s core design tradeoffs - admins can install packages the way they are used to,
without requiring a separate image-build step. But it also means the admin can mess
it up - conda environments can be sometimes fickle! So it&rsquo;s not a bad idea to
spend some time in the beginning setting everything up - python packages,
JupyterLab extensions, etc. Then make a disk snapshot, so you can revert to it
if things go bad (this is where having a separate disk for your user home
directories comes in handy).</p>
<h2 id="ssh-admin-access">SSH admin access</h2>
<p>The TLJH documentation strives hard to make sure SSH isn&rsquo;t <em>required</em> for setup and
most common usage. However, if your TLJH breaks in certain ways, you can no longer
access the machine - since all access is via TLJH! For this, I recommend making sure
someone who is admin has SSH access to the VM. Most cloud providers offer a way to
set the root ssh key on creation. If not, you can follow the many guides on the internet
to making it happen.</p>
<p>You can also just put your ssh keys in <code>$HOME/.ssh/authorized_keys</code>, and ssh in as
<code>jupyter-&lt;username&gt;@&lt;hub-ip&gt;</code>. This works for any / all users!</p>
<h2 id="others">Others?</h2>
<p>I&rsquo;m sure this isn&rsquo;t the end - probably need something about firewalls, monitoring and automated
system package upgrades. But hey, great start!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/dask-local-kubernetes/">Access dask-kubernetes clusters running on a cloud from your local machine</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-06-27 </span>
      <div class="post-category">
          <a href="/categories/code/"> code </a>
          <a href="/categories/dask/"> dask </a>
          </div>
        <span class="more-meta"> 934 words </span>
        <span class="more-meta"> 5 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>You can run your Jupyter Notebook locally, and connect easily to a remote <code>dask-kubernetes</code> cluster
on a cloud-based Kubernetes Cluster with the help of <a href="https://kubefwd.com/">kubefwd</a>. This notebook
will show you an example of how to do so. While this example is a Jupyter Notebook, the code will work
any local python medium - REPL, IDE (vscode), or just plain ol' <code>.py</code> files</p>
<p>Latest executable version of this notebook can be found in <a href="https://github.com/yuvipanda/cloud-local-dask-kubernetes">this repository</a></p>
<h2 id="credit">Credit</h2>
<p>This work was sponsored by <a href="https://www.quansight.com/">Quansight</a> ❤️</p>
<h2 id="create--setup-a-kubernetes-cluster">Create &amp; setup a Kubernetes cluster</h2>
<p>You need to have a working kubernetes cluster that is configured correctly. If you can get
<code>kubectl get ns</code> to work properly, it means your cluster is working fine &amp; connected for
this to go.</p>
<h2 id="install--run-kubefwd">Install &amp; run kubefwd</h2>
<p><code>kubefwd</code> lets you access services in your cloud Kubernetes cluster as if they were
localy, with a clever combination of ol' school <code>/etc/hosts</code> hacks &amp; fancy kubernetes
port-forwarding. It requires root on Mac OS &amp; Linux, and should theoretically work on
Windows too (haven&rsquo;t tested).</p>
<p>Once you have installed it, run it in a separate terminal.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo kubefwd svc -n default -n kube-system
</code></pre></div><p>If you&rsquo;ve created your own namespace for your cluster, use that instead of <code>default</code>.
The <code>kube-system</code> is required until <a href="https://github.com/txn2/kubefwd/issues/132">this issue</a>
is fixed.</p>
<p>If the <code>kubefwd</code> command runs successfully, we&rsquo;re good to go!</p>
<h2 id="install-libraries-well-need">Install libraries we&rsquo;ll need</h2>
<p>In addition to <code>dask-kubernetes</code>, we&rsquo;ll also need <code>numpy</code> to test our cluster with dask arrays.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">%</span><span style="color:#111">pip</span> <span style="color:#111">install</span> <span style="color:#111">numpy</span> <span style="color:#111">dask</span> <span style="color:#111">distributed</span> <span style="color:#111">dask</span><span style="color:#f92672">-</span><span style="color:#111">kubernetes</span>
</code></pre></div><h2 id="setup-dask-kubernetes-configuration">Setup dask-kubernetes configuration</h2>
<p>Normally, the pod template would come from an external configuration file.
We keep this in the notebook to make it more self contained.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#111">POD_SPEC</span> <span style="color:#f92672">=</span> <span style="color:#111">{</span>
    <span style="color:#d88200">&#39;kind&#39;</span><span style="color:#111">:</span> <span style="color:#d88200">&#39;Pod&#39;</span><span style="color:#111">,</span>
    <span style="color:#d88200">&#39;metadata&#39;</span><span style="color:#111">:</span> <span style="color:#111">{},</span>
    <span style="color:#d88200">&#39;spec&#39;</span><span style="color:#111">:</span> <span style="color:#111">{</span>
        <span style="color:#d88200">&#39;restartPolicy&#39;</span><span style="color:#111">:</span> <span style="color:#d88200">&#39;Never&#39;</span><span style="color:#111">,</span>
        <span style="color:#d88200">&#39;containers&#39;</span><span style="color:#111">:</span> <span style="color:#111">[</span>
            <span style="color:#111">{</span>
                <span style="color:#d88200">&#39;image&#39;</span><span style="color:#111">:</span> <span style="color:#d88200">&#39;daskdev/dask:latest&#39;</span><span style="color:#111">,</span>
                <span style="color:#d88200">&#39;args&#39;</span><span style="color:#111">:</span> <span style="color:#111">[</span>
                    <span style="color:#d88200">&#39;dask-worker&#39;</span><span style="color:#111">,</span>
                    <span style="color:#d88200">&#39;--death-timeout&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;60&#39;</span>
                <span style="color:#111">],</span>
                <span style="color:#d88200">&#39;name&#39;</span><span style="color:#111">:</span> <span style="color:#d88200">&#39;dask&#39;</span><span style="color:#111">,</span>
            <span style="color:#111">}</span>
        <span style="color:#111">]</span>
    <span style="color:#111">}</span>
<span style="color:#111">}</span>
</code></pre></div><h2 id="create-a-remote-cluster--connect-to-it">Create a remote cluster &amp; connect to it</h2>
<p>We create a <code>KubeCluster</code> object, with <code>deploymode='remote'</code>. This creates
the scheduler as a pod on the cluster, so worker &lt;-&gt; scheduler communication
is easy &amp; efficient. <code>kubefwd</code> helps us communicate to this remote scheduler,
so we can pretend we are actually on the remote cluster.</p>
<p>If you are using <code>kubectl</code> to watch the objects created in your namespace,
you&rsquo;ll see a <code>service</code> and a <code>pod</code> created for this. <code>kubefwd</code> should
also list a log line about forwarding the service port locally.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> <span style="color:#111">dask_kubernetes</span> <span style="color:#f92672">import</span> <span style="color:#111">KubeCluster</span>

<span style="color:#111">cluster</span> <span style="color:#f92672">=</span> <span style="color:#111">KubeCluster</span><span style="color:#f92672">.</span><span style="color:#111">from_dict</span><span style="color:#111">(</span><span style="color:#111">POD_SPEC</span><span style="color:#111">,</span> <span style="color:#111">deploy_mode</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;remote&#39;</span><span style="color:#111">)</span>
</code></pre></div><h2 id="create-some-workers">Create some workers</h2>
<p>We have a scheduler in the cloud, now time to create some workers in the
cloud! We create 2, and can watch the worker pods come up with glee in
<code>kubectl</code></p>
<p>All scaling methods (adaptive scaling, using the widget, etc) should work
here.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#111">cluster</span><span style="color:#f92672">.</span><span style="color:#111">scale</span><span style="color:#111">(</span><span style="color:#ae81ff">2</span><span style="color:#111">)</span>
</code></pre></div><h2 id="run-some-computation">Run some computation!</h2>
<p>We test our cluster by doing some trivial calculations with dask arrays.
You can use any dask code as you normally would here, and it would
run on the cloud Kubernetes cluster. This is especially helpful if you
have large amounts of data in the cloud, since the workers would be
really close to where the data is.</p>
<p>You might get warnings about version mismatches. This is ok for the demo,
in production you&rsquo;d probably build your own docker image that will
have fixed versions.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> <span style="color:#111">dask.distributed</span> <span style="color:#f92672">import</span> <span style="color:#111">Client</span>
<span style="color:#f92672">import</span> <span style="color:#111">dask.array</span> <span style="color:#f92672">as</span> <span style="color:#111">da</span>

<span style="color:#75715e"># Connect Dask to the cluster</span>
<span style="color:#111">client</span> <span style="color:#f92672">=</span> <span style="color:#111">Client</span><span style="color:#111">(</span><span style="color:#111">cluster</span><span style="color:#111">)</span>

<span style="color:#75715e"># Create a large array and calculate the mean</span>
<span style="color:#111">array</span> <span style="color:#f92672">=</span> <span style="color:#111">da</span><span style="color:#f92672">.</span><span style="color:#111">ones</span><span style="color:#111">((</span><span style="color:#ae81ff">1000</span><span style="color:#111">,</span> <span style="color:#ae81ff">1000</span><span style="color:#111">,</span> <span style="color:#ae81ff">1000</span><span style="color:#111">))</span>
<span style="color:#00a8c8">print</span><span style="color:#111">(</span><span style="color:#111">array</span><span style="color:#f92672">.</span><span style="color:#111">mean</span><span style="color:#111">()</span><span style="color:#f92672">.</span><span style="color:#111">compute</span><span style="color:#111">())</span>  <span style="color:#75715e"># Should print 1.0</span>
</code></pre></div><h2 id="cleanup-dask-cluster">Cleanup dask cluster</h2>
<p>When you&rsquo;re done with your cluster, remember to clean it up to release
the resources!</p>
<p>This doesn&rsquo;t affect your kubernetes cluster itself - you&rsquo;ll need to
clean that up manually</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#111">cluster</span><span style="color:#f92672">.</span><span style="color:#111">close</span><span style="color:#111">()</span>
</code></pre></div><h2 id="next-steps">Next steps?</h2>
<p>Lots more we can do from here.</p>
<h3 id="ephemeral-kubernetes-clusters">Ephemeral Kubernetes Clusters</h3>
<p>We can wrap kubernetes cluster creation in some nice python functions, letting users create kubernetes clusters just-in-time for running a dask-kubernetes cluster, and tearing it down when they&rsquo;re done. Users can thus &lsquo;bring their own compute&rsquo; - since the clusters will be in their cloud accounts - without having the complication of understanding how the cloud works. This is where this would be different from the wonderful <a href="https://gateway.dask.org">dask-gateway</a> project I think.</p>
<h3 id="remove-kubefwd">Remove kubefwd</h3>
<p><code>kubefwd</code> isn&rsquo;t strictly necessary, and should ideally be replaced by a <code>kubectl port-forward</code> call that doesn&rsquo;t require root. This should be possible with some changes to the <code>dask-kubernetes</code> code, so the client can connect to the scheduler via a different address (say, <code>localhost:8974</code>, since that&rsquo;s what <code>kubectl port-forward</code> gives us) vs the workers (which need something like <code>dask-cluster-scheduler-c12.namespace:8786</code>, since that is in-cluster address).</p>
<p>Longer term, it would be great if we can get rid of spawning other processes altogether, if/when the python kubernetes client gains the <a href="https://github.com/kubernetes-client/python/issues/166">ability to port-forward</a>.</p>
<h3 id="integration-with-tljh">Integration with TLJH</h3>
<p>I love <a href="https://tljh.jupyter.org">The Littlest JupyterHub (TLJH)</a>. A common use case is that a group of
users need a JupyterHub, mostly doing work that&rsquo;s well seved by TLJH. However, sometimes they
need to scale up to a big dask cluster to do some work, but not for long. In these cases, I believe
a combination of TLJH + Ephemeral Kubernetes Clusters is far simpler &amp; easier to manage than running
a full Kubernetes based JupyterHub. In addition, we can share the conda environment from TLJH with
the dask workers, <strong>removing the need for users to think about docker images or environment
mismatches completely</strong>. This is a massive win, and merits further exploration.</p>
<h3 id="heading">???</h3>
<p>I am not actually an end user of dask, so I&rsquo;m sure actual dask users will have much more ideas.
Or they won&rsquo;t, and this will just end up being a clever hack that gives me some joy :D Who
knows!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/google-domain/">Check if an organization is using GSuite</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-06-18 </span>
      <div class="post-category">
          <a href="/categories/code/"> code </a>
          </div>
        <span class="more-meta"> 150 words </span>
        <span class="more-meta"> 1 min read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I needed to find out if an organization was using <a href="https://gsuite.google.com/">GSuite</a> for their emails, so I can allow their users to login to a <a href="https://github.com/berkeley-dsep-infra/datahub/tree/ab2bf49be680480cf9de07968561257e7810850f/deployments/buds-2020">JupyterHub</a> I was setting up. I use Google Auth in other places, so I wanted to find out if this organization was using GSuite.</p>
<p>I could&rsquo;ve just <em>asked</em> them, but where&rsquo;s the fun in that? Instead, you can use <code>dig</code> to find out!</p>
<p>For example, if I were to test <code>berkeley.edu</code>, I can run:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ dig -t mx berkeley.edu
</code></pre></div><p>This gives me a bunch of output, the important bits of which are:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">;; ANSWER SECTION:
berkeley.edu.		242	IN	MX	5 alt1.aspmx.l.google.com.
berkeley.edu.		242	IN	MX	10 alt3.aspmx.l.google.com.
berkeley.edu.		242	IN	MX	10 alt4.aspmx.l.google.com.
berkeley.edu.		242	IN	MX	1 aspmx.l.google.com.
berkeley.edu.		242	IN	MX	5 alt2.aspmx.l.google.com.
</code></pre></div><p>This means that mail to <code>anyone@berkeley.edu</code> is routed via Google, so I know this organization is using GSuite for their users!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/on-being-entitled-user/">On Being an &#39;Entitled User&#39;</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-05-28 </span>
      
        <span class="more-meta"> 595 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>Entitled users burn out maintainers. While my massive burning out wasn&rsquo;t directly related, it didn&rsquo;t help either. For a <strong>lot</strong> of other maintainers, it has been a primary source of burnout. This is an unfortunate reality of our time. There are a ton of stories from maintainers out there -see <a href="https://twitter.com/michaelwaskom/status/1264295556475731969?s=20">this</a> for a recent example. Not going to rehash that.</p>
<p>However, I&rsquo;ve recently found myself on the &lsquo;other side&rsquo; of this coin. I exhibited the following symptoms</p>
<ul>
<li>Whining about lack of documentation. I discover useful nuggets from helpful people on chat and by reading through the code, but don&rsquo;t actually contribute those to docs.</li>
<li>Complain about technology choices, without a lot of actual experience in the domain.</li>
<li>When technology choices that I favor <strong>were</strong> made, not actually put my effort into it. I acknowledge that I don&rsquo;t <strong>have</strong> to do this - I have little time too. But with whatever time I have, I wish I would do this than whine.</li>
<li>Hit-and-run engagement, where I only show up every few months whenever I am trying to solve a particular problem, complain / do things, then run away. Things seem to get more to my liking each time I come back, but I still seem to be complaining anyway. I also acknowledge that this is ok - I am burnt out too. But this does mean I can&rsquo;t expect to find working with this code base easy. It also means that the team of people actually working on it only interact with me when I&rsquo;m in this mode, which I don&rsquo;t like either.</li>
<li>Wade into emotionally charged situations based on events that have already happened in the project that I wasn&rsquo;t part of, trample around slightly, and then withdraw on recognizing I don&rsquo;t have the emotional bandwidth to fully understand what was happening. This makes the situation worse for everyone, including myself.</li>
<li>There&rsquo;s probably more behavior here that I don&rsquo;t recognize.</li>
</ul>
<p>In a lot of ways, I think my frustrations and criticisms are valid. However, there&rsquo;s very constructive ways to engage, and then there&rsquo;s just useless whining that burns other people out. I would like to think I&rsquo;ve generally picked the constructive way in most projects. But that has blinded me in my behavior in a few projects.</p>
<p>I&rsquo;m going to try and change my behavior to match what I&rsquo;d like a frustrated user to do in open source projects where I&rsquo;m the maintainer.</p>
<ul>
<li>I&rsquo;ll contribute documentation (either as blog posts, issues, or doc PRs) when I find solutions to problems that I am frustrated by</li>
<li>If I favor other technology choices, I&rsquo;d provide constructive criticism of why, and then STFU. Or, I&rsquo;ll actually work on making the change. I will not continue to whine.</li>
<li>When I recognize an emotionally charged situation, I will limit myself to actions I can fully emotionally engage in. This is a limitation of my own emotional bandwidth, fueled by burnout and other things. I&rsquo;m simply recognizing the limitation, and trying to not make anything worse.</li>
<li>I do have a right to whine, and I&rsquo;ll do so in private to people not otherwise engaged in the project.</li>
<li>I will generally ask myself &lsquo;how would I like a user to behave if I was the maintainer?&rsquo; and try to act in that way</li>
</ul>
<p>To be clear, these are the things I want to change about myself based on my situation. This isn&rsquo;t a prescriptive list for other people to follow.</p>
<p>To the wonderful hardworking people who are maintainers of any popular open source projects - thank you for putting up with me.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/note-taking-why/">Note taking: Why bother?</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-05-26 </span>
      
        <span class="more-meta"> 105 words </span>
        <span class="more-meta"> 1 min read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>Talking to <a href="https://ankursethi.in/">Ankur Sethi</a> made me think more clearly about <strong>why</strong> I want <a href="http://words.yuvi.in/post/note-taking-part-i/">note-taking</a>, <a href="http://words.yuvi.in/post/note-taking-ii-bookmarks/">bookmarking setups</a>.</p>
<p>I am <strong>trying to stop feeling so overwhelmed by moving things out of my puny brain</strong>.</p>
<p>The solution to this is two fold.</p>
<ol>
<li>Commit to and do fewer things. Already working on this.</li>
<li>Be more efficient in the things you are doing.</li>
</ol>
<p>A few years ago I gave up on chasing efficiency gains because they were all
so marginal (hello, maintaining a super customized <code>.vimrc</code>). But I think I
threw out the baby with the bathwater there, by focusing on the wrong kinds
of efficiency. So am trying again!</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/note-taking-ii-bookmarks/">Note Taking II - Retaining consumed content</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-05-24 </span>
      
        <span class="more-meta"> 1044 words </span>
        <span class="more-meta"> 5 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>In conversation with <a href="https://nirbheek.in/">Nirbheek</a> about <a href="http://words.yuvi.in/post/note-taking-part-i/">my blog post on note taking</a>, he said something like &lsquo;my system of knowledge has holes, and I lose track of stuff I learnt because of that&rsquo;. This was slightly complementary to my earlier quest - the outliner helped me in structuring how I thought and produced content. However, a bookmarking system will help me consume and <strong>retain</strong> knowledge. Both need to be integrated, but I currently had only one half of the puzzle.</p>
<p>We ended up talking about &lsquo;bookmarks&rsquo; and how he has a lot of them. I&rsquo;ve felt the need for saving stuff I read in useful ways, but never used bookmarks because I never look at them again. It would be awesome to have a system of that sort - especially if it was integrated into my notetaking and todo list solutions.</p>
<p>We talked about some current solutions - <a href="https://twitter.com/prxtl">Pratul</a>&rsquo;s meticulously tagged <a href="https://pinboard.in/">pinboard</a> account, <a href="https://ankursethi.in/">Ankur</a>&rsquo;s blog&rsquo;s <a href="https://ankursethi.in/category/links/">links category</a>. All this was too much work for me, but I couldn&rsquo;t quite articulate why. I&rsquo;ve tried both these options before and couldn&rsquo;t keep them up. Longevity was my goal here, so I kept looking.</p>
<h2 id="memex">Memex</h2>
<p>This lead us to <a href="https://github.com/WorldBrain/Memex">Memex</a>, and open source system (with a paid hosted version) that seemed to do everything we wanted. They made a particular point of <a href="https://github.com/WorldBrain/Memex#no-vc-money-no-exit-your-data--attention-stays-yours">not taking VC money</a>, which is a big draw for me.</p>
<p>Nirbheek tried it out, and found it buggy / wanting. Particularly, it only worked on half his bookmarks - the rest had rotten, or the import itself was buggy. This could be fixed with <a href="https://archive.org/">Internet Archive</a> integration, but there were a few more bugs about data loss in their <a href="https://github.com/WorldBrain/Memex/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc">issue tracker</a> that didn&rsquo;t give me too much confidence. It does still look amazing, and I will try it out at some point soon - unlike Nirbheek, I don&rsquo;t have a few thousand bookmarks to import.</p>
<p>However, it gave met he name <strong>Memex</strong>, with a history behind it - an article by Vannevar Bush (Claude Shannon was his student) from 1945 called <strong><a href="https://en.wikipedia.org/wiki/Memex">As we may think</a></strong>. This was an extremely fascinating read - I read it in the <a href="http://worrydream.com/refs/Bush%20-%20As%20We%20May%20Think%20(Life%20Magazine%209-10-1945).pdf">original layout</a>, with fascinating ads by the side (Men&rsquo;s garters, for example).</p>
<p>Here is my <a href="/papers/as-we-may-think.pdf">annotated version</a>, with the origins of the rest of this blog post at the bottom. It&rsquo;s fairly short, so I suggest you read the original. I&rsquo;m not going to rehash it, but just talk about what I think I need in my &lsquo;bookmarking&rsquo; solution.</p>
<h2 id="what-is-a-bookmark">What is a bookmark?</h2>
<p>Bookmark is a terrible word for what I want, but I can&rsquo;t think of a better one right now. Bush defines the &lsquo;memex&rsquo; as:</p>
<blockquote>
<p>A memex is a device in which an individual stores all his books, records and communications, and which is mechanized so that it may be consulted with <strong>exceeding speed and flexibility</strong>. It is an <strong>enlarged intimate supplement to his memory</strong>.</p>
</blockquote>
<p>(Gendered pronouns in the source left in for for faithful reproduction. I&rsquo;d like to think that if this was written today, it would use gender neutral pronouns)</p>
<p>So a &lsquo;bookmark&rsquo; is an individual thing that I come across that I might possibly ever want to remember again. I can&rsquo;t remember it all, so I want to toss it into a &lsquo;bookmarking system&rsquo; that can be searched with &lsquo;exceeding speed and flexibility&rsquo;.</p>
<p>Based on this, I figured out my current criteria for looking at &amp; trying out such systems to find one that meets my needs.</p>
<h2 id="search-first">Search first</h2>
<p>I want my interface to be a simple text box into which I can type things, and it&rsquo;ll search the entire contents of everything I&rsquo;ve &lsquo;bookmarked&rsquo;. This should be articles I&rsquo;ve read, books, tweets, videos I&rsquo;ve watched, podcasts I&rsquo;ve listened to, my notes, etc. I don&rsquo;t want to do any tagging or categorizing myself.</p>
<p>Tagging and categorizing remind me of <a href="https://en.wikipedia.org/wiki/DMOZ">dmoz</a> and <a href="https://en.wikipedia.org/wiki/Yahoo!_Directory">Yahoo Directories</a>. Way too much work for me, and I&rsquo;ll never look at them again.</p>
<p>Bush calls <strong>selection</strong> (we would call that &lsquo;search&rsquo; today) as the primary problem , and rails against <strong>indexing</strong> (IMO we would call this tagging / categorizing) as insufficient.</p>
<p>This search needs to be <strong>extremely fast</strong>, and very relevant.</p>
<h2 id="never-forgets">Never forgets</h2>
<p>I should have access to these &lsquo;bookmarks&rsquo; all the time. This means cross-device sync (Android, iPad, Mac OS for me).</p>
<p>It also needs to actually archive all the content I throw at it. Save web pages fully. Download (and transcribe) videos / podcats. Find some way to keep books in there. No link rot, no &lsquo;shit this content is now behind a paywall&rsquo;, no &lsquo;damn, I wish I had my laptop with me&rsquo;.</p>
<h2 id="hyperlinking">Hyperlinking</h2>
<p>I should be able to connect bookmarks together. I guess this could be done with tagss, but I want something else that&rsquo;s better. Bush talks about being able to link &lsquo;bookmarks&rsquo; to each other with a blurb about the link - this is what we would call a &lsquo;hyperlink&rsquo; now.</p>
<p>My note taker has hyperlinks with other notes, but I should be able to hyperlink to content I have saved. I should also be able to link together content I&rsquo;ve saved that doesn&rsquo;t have links themselves.</p>
<p>Strong integration between this and my note taker is probably the way to go. <strong>Each piece of content should have highlights, and notes attached to them</strong>. These could contain hyperlinks easily. The highlights and notes should also be searchable.</p>
<h2 id="publishable">Publishable</h2>
<p>Bush talks about &lsquo;trailblazers&rsquo; - people who find new content, link it together in useful ways, and publish it for others.</p>
<p>This was how I used <a href="https://en.wikipedia.org/wiki/Google_Reader#Sharing">Google Reader&rsquo;s Shared</a> functionality. You could publish a link with all the content you have consumed that you marked as &lsquo;shared&rsquo;, with a note as well. I would subscribe to other people&rsquo;s shared feeds, and find useful content (and blogs) to follow.</p>
<p>RIP Google Reader. It continues to make me wary of relying on any of Google&rsquo;s services.</p>
<p>Having a note taker has already drastically changed how I think and  produce content. I feel integrating this into my life will have similar effects on how I consume content. Now that I have a better idea of what I <strong>want</strong>, I&rsquo;ll spend some more time looking.</p>
<h2 id="credits">Credits</h2>
<p>Thanks to <a href="https://nirbheek.in/">Nirbheek</a>, <a href="https://ankursethi.in/">Ankur Sethi</a> and <a href="https://prtksxna.com/">Prateek</a> for conversations and thoughts on this topic :)</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/note-taking-part-i/">Note Taking Part I</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-05-17 </span>
      
        <span class="more-meta"> 1115 words </span>
        <span class="more-meta"> 6 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>I am trying to find a nice way to keep thoughts, ideas and notes outside my head for a few months now.
I worked my way through many applications, trying to use the system they promote as the basis for my own. Along the journey, I got a better sense of what was important to me in such an application. I&rsquo;ll walk through the various applications I&rsquo;ve tried, along with the criteria I&rsquo;ve developed by the end</p>
<h2 id="evernote">Evernote</h2>
<p>First stop, big one. I already had misgivings about it being from a large corporation. I still paid for it, and tested it out for a few months.</p>
<ul>
<li>No markdown support. This immediately became a problem - I had no idea how much I&rsquo;ve come to expect markdown wherever I type. They have been <a href="https://discussion.evernote.com/topic/118932-native-markdown-support/">asked for markdown support</a> many times, but I don&rsquo;t think this is ever going to happen. I realized that <strong>markdown support is a minimum requirement</strong> for me</li>
<li>Conflict resolution when I edited the same note in multiple places was really terrible. Completely unusable. I&rsquo;ve 3 devices I use regularly - an iPad Pro, a Macbook and my Android Phone. Through this experience I discovered that <strong>proper cross-device syncing is very important</strong> for me as well.</li>
<li>I paid Evernote so I could work offline. I already have a lot of anxiety about not having internet access (a topic for another post), and didn&rsquo;t want to not have access to these if I don&rsquo;t have internet access. This wasn&rsquo;t very good thanks to the shitty conflict resolution, but the process made me realize that I cared a lot about <strong>full offline availability</strong></li>
<li>I also hated the UI. It was clunky, had way too many options, and none of the options I really wanted.</li>
<li>There was no way to link notes together I found. I realized that my time at wikimedia had made me very accustomed to hyperlinking as a way of writing. Evernote had no clear affordances for doing this. So <strong>hyperlinking</strong> became important to me. I could also smile at the big impact Wikimedia has had on the way I think :D This was the beginning of me recognizing that a purely hierarchical setup might not work for me&hellip;</li>
</ul>
<p>I noticed I was using Evernote less and less, and wandered the desert for a while.</p>
<h2 id="onenote">OneNote</h2>
<p>I had been using OneNote on and off for a while. It has some of the same problems Evernote has. But the absolute no-go for me was how it handled text notes on my laptop.</p>
<p><img src="/images/note-taking/onenote-terrible.png" alt="one note being terrible"></p>
<p>This <strong>feature</strong> killed it. It was too much mental load, and I hated the extra UI it brought. It had most of the problems evernote did, and worse.</p>
<h2 id="list-applications">List applications</h2>
<p>At this point, I read some parts of <a href="https://www.goodreads.com/book/show/1633.Getting_Things_Done">Getting Things Done</a> again, trying to control my sprawling, anxiety-filled work life. It was useful, as always, but mostly to remind me to <strong>not use my brain to store data</strong>.</p>
<p>I then spent a bunch of time bouncing between different <strong>todo list apps</strong>, as a way to get stuff out of my brain and into a list. Learning about <a href="https://www.becktench.com/blog/2019/5/13/kinder-to-do-lists">kinder todo lists</a> was very helpful.</p>
<p>I tried a lot of these apps - Google Keep, <a href="https://www.nirvanahq.com/">Nirvana</a>, Evernote / OneNote, <a href="https://ticktick.com/">TickTick</a>. Nothing really clicked, but eventually I ended up on <a href="https://todoist.com/app/">Todoist</a>. The app was great, sync worked fine, and my flatmate also used it. Boom!</p>
<p>I was still looking for a note-taking app, which I considered quite distinct from the todo list apps. I was also finding the fixed format of todoist a bit limiting. I wanted each of my Projects to have a criteria of &lsquo;this is now done&rsquo;, but there wasn&rsquo;t an easy way to do that in Todoist. The importance given to due dates was also nagging, and gave me anxiety.</p>
<h2 id="inkdrophttpswwwinkdropapp"><a href="https://www.inkdrop.app/">Inkdrop</a></h2>
<p>Looking for cross-device markdown note taking apps led me to Inkdrop. Built by a single indie dev, <a href="https://my.inkdrop.app/plugins">has lots of plugins</a>, and looked quite nice. I started using it and quite liked it in the beginning. It has a <a href="https://my.inkdrop.app/plugins/vim">vim plugin</a> which is an absolute requirement for me if I&rsquo;m going to be writing a lot of text (or so I thought)
However, I found I wasn&rsquo;t using it as much. It had all the features I thought I wanted, but somehow it wasn&rsquo;t quite fitting the mental model I had.</p>
<h2 id="outliners">Outliners</h2>
<p>At this point, I heard about <a href="https://roamresearch.com/">Roam Research</a>. It looked really neat, and was quite different from the other note taking apps. I had always dismissed <a href="https://orgmode.org/">org-mode</a> for its emacs-centrism, but this made me reconsider that. However, it was in closed beta, so I let it be. I&rsquo;ll definitely re-visit it, especially if it has a good offline story.</p>
<p>I looked around for alternatives, and discovered <a href="https://workflowy.com/">workflowey</a>. I&rsquo;ll admit the list of endorsements on their home page was a big draw for me.
However, when I tried to sign up, I got</p>
<p><img src="/images/note-taking/workflowey-password.jpg" alt="one note being terrible"></p>
<p>My usual password length is 63, and it totally <a href="https://twitter.com/WorkFlowy/status/1261034917011632128">failed that test</a>. I also discovered <a href="https://workflowy.zendesk.com/hc/en-us/community/posts/360007921026-Needs-some-kind-of-Markdown-syntax-support-">they don&rsquo;t support markdown</a> so that rules them out</p>
<h2 id="dynalist">Dynalist</h2>
<p>I discovered <strong><a href="https://dynalist.io/">Dynalist</a></strong> as a Workflowey alternative. It has all the things I want, and I&rsquo;ve been using it for a few days now. It&rsquo;s been extremely awesome! The syncing is flakey, and I have some anxiety about losing data - but otherwise, the format itself has been great for me!</p>
<p>So what I&rsquo;ve realized is that I don&rsquo;t want a note taking app, <strong>I wanted an outliner</strong>. Outliners seem to match how my brain works much better than purely hierarchical note taking apps. I can take notes without having to worry about organizing them first, and then organize them afterwards as I see fit. Very low mental overhad between what is in my brain and what&rsquo;s on the screen. I like it.</p>
<p>I hope I can replace todoist with Dynalist too. I&rsquo;ll experiment with it later. But for now, &lt;3 dynalist. This blog post was written in dynalist, then edited in <a href="https://typora.io/">typora</a>. Not bad.</p>
<h2 id="evaluation-criteria">Evaluation criteria</h2>
<p>In the end, looks like I have these needs when it comes to outliners / note taking apps.</p>
<ul>
<li>
<p>Markdown support, ideally with something like <a href="https://katex.org/">KaTeX</a> or <a href="https://www.mathjax.org/">MathJax</a> support</p>
</li>
<li>
<p>Cross-device sync across platforms (Mac, iPad, Android)</p>
</li>
<li>
<p>Full offline support, with sync that doesn&rsquo;t lose data</p>
</li>
<li>
<p>Ability to hyperlink different parts of the system</p>
</li>
</ul>
<p>I&rsquo;ll look at Roam research later, but for now, I&rsquo;m enjoying having a note taking system that matches how my brain seems to think.</p>
<h2 id="credits">Credits</h2>
<p>Lots of good conversations about this in various places with <a href="https://www.deobald.ca/">Steve Deobald</a>, <a href="https://twitter.com/prxtl">Pratul Kalia</a>, <a href="https://twitter.com/robla">Robla</a>, <a href="https://prtksxna.com/">Prateek</a>, <a href="https://ankursethi.in/">Ankur Sethi</a> and many others who I am clearly forgetting.</p>
<p>Would love to hear about what you use, via <a href="mailto:yuvipanda@gmail.com">Email</a> or <a href="https://twitter.com/yuvipanda">Twitter</a>.</p>

  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/miss-blogging/">I miss blogging too</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2020-05-17 </span>
      
        <span class="more-meta"> 272 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
      <p>This person <a href="http://tttthis.com/blog/if-i-could-bring-one-thing-back-to-the-internet-it-would-be-blogs">misses blogs a lot</a>.
So do I. I made many frients, built myself a platform, and expressed myself in ways I do not feel
like I can anymore on my various blogs. Some of them are lost to time, but some are there if you know
how to find it.</p>
<p>Part of it was where my life was - I had time, nobody physically nearby I jived with, and a
<strong>lot</strong> of angst. But now, I have too little time, and too many (hah!) wonderful people I enjoy
interacting with on a 1-1 basis, nearby or not. Plus, with the death of blogging platforms
(Medium is a publishing platform, not a blogging one), content is harder to find. As the author
points out,</p>
<blockquote>
<p>The other day I searched for an hour and couldn&rsquo;t find even one. They used to be endless. You&rsquo;d just click on one you knew on Blogger and either click Blogger&rsquo;s random blog button, or go to the sidebar of the blog you knew where they always had a list of blogs they liked, sometimes four or 5, sometimes 20 other blogs. And the same with Tumbler.</p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Technorati">Technorati</a> is dead, and there isn&rsquo;t anything like it.
Twitter, Facebook, Instagram, Medium, etc are no replacements for long form text insight into
someone&rsquo;s lives. They have brought the internet experience to way more people, but I feel like
they have taken something away from me.</p>
<p>I guess this will be one of those blog posts that end with me saying &ldquo;I will try to blog more&rdquo;
and then there are no more posts for the next few years :)</p>

  </div>
</article>

    </section>
  
  <nav class="pagination">
    
    <a class="next" href="/page/2/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme -
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy;
    2005 -
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Yuvi Panda</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
