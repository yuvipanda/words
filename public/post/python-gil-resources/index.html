<!DOCTYPE html>
<html>
<head>
    <title>python gil resources // Yuvi Panda</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="Open Knowledge | Open Source | Jupyter | Kubernetes | Wikimedia | Python">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="python gil resources" />
    <meta property="og:description" content="Open Knowledge | Open Source | Jupyter | Kubernetes | Wikimedia | Python" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="http://words.yuvi.in/post/python-gil-resources/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="Yuvi Panda" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="http://words.yuvi.in/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="http://words.yuvi.in/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="http://words.yuvi.in/css/style.css">

    <link href="http://gmpg.org/xfn/11" rel="profile">
    
    <meta name="generator" content="Hugo 0.31.1" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="http://words.yuvi.in/">Yuvi Panda</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="mailto:yuvipanda@gmail.com">email</a>
                
                <a class="main-nav-link" href="https://github.com/yuvipanda">github</a>
                
                <a class="main-nav-link" href="https://twitter.com/yuvipanda">twitter</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>
    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">python gil resources</h1>
        </header>
        
        <div class="article-meta">
            <a href="/post/python-gil-resources/" class="article-date">
                <time datetime='2017-04-05T23:18:19.000-07:00' itemprop="datePublished">2017-04-05</time>
            </a>
            
            
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            

<p>I was in a conversation about the Python GIL with friends a few days ago, and realized that my understanding of the specifics of the GIL problem were super hand-wavy &amp; unstructured. So I spent some time collecting resources to learn more, and now have a better understanding!</p>

<h4 id="python-s-infamous-gil-larry-hastings">Python&rsquo;s Infamous GIL (Larry Hastings)</h4>

<p>This was a <em>great</em> introduction to the history of the GIL, why it was necessary &amp; reasons why getting rid of it is complicated.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/4zeHStBowEk?ecver=1" frameborder="0" allowfullscreen></iframe>

<h4 id="understanding-the-python-gil-david-beazley">Understanding the Python GIL (David Beazley)</h4>

<p>This has wonderful visualizations that really helped me understand exactly <em>why</em> multi-threaded python behaves the way it does. Multithreading decreases performance, adding more cores decreases performance &amp; disabling cores increases performance :) All of this made vague hand-wavy sense to me before, and make much more concrete sense now.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Obt-vMVdM8s?ecver=1" frameborder="0" allowfullscreen></iframe>

<h4 id="it-isn-t-easy-to-remove-the-gil-guido-van-rossum">It isn&rsquo;t easy to remove the GIL (Guido van Rossum)</h4>

<p>A <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=214235">blog post</a> from the BDFL of python, after yet another request to &lsquo;just get rid of the GIL&rsquo;.</p>

<p>It set the (pretty high) bar for inclusion of a GIL removal patch (that he makes clear he will not write) in Python:</p>

<blockquote>
<p>I&rsquo;d welcome a set of patches into Py3k only if the performance for a single-threaded program (and for a multi-threaded but I/O-bound program) does not decrease.</p>
</blockquote>

<p>Not been met yet!</p>

<h4 id="an-inside-look-at-the-gil-removal-patch-of-lore-dave-beazley">An Inside Look at the GIL Removal Patch of Lore (Dave Beazley)</h4>

<p>There was an attempt in about 1999 to remove the GIL - the &lsquo;freethreading&rsquo; patch. This is a <a href="http://dabeaz.blogspot.com/2011/08/inside-look-at-gil-removal-patch-of.html">wonderful analysis</a> of that patch - what it tried to do, why it disappeared, what the performance costs of it were, etc. Something that really stood out to me and makes me feel not very hopeful about GIL removal in CPython was:</p>

<blockquote>
<p>Despite removing the GIL, I was unable to produce any performance experiment that showed a noticeable improvement on multiple cores. Really, the only benefit (ignoring the horrible performance) seen in pure Python code, was having preemptible instructions.</p>
</blockquote>

<p>This seems to be still true, even in the Gilectomy branch.</p>

<h4 id="gilectomy-larry-hastings">Gilectomy (Larry Hastings)</h4>

<p>This is the only talk about a recent (~2016) GIL removal attempt.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/P3AyI_u66Bw?ecver=1" frameborder="0" allowfullscreen></iframe>

<p>It is amazing work, but doesn&rsquo;t give me much hope. There&rsquo;s been no new commits to the <a href="https://github.com/larryhastings/gilectomy/tree/gilectomy">public git repo</a> for about 5 months now, so am unsure what the state of it now is.</p>

<p>There&rsquo;s probably many more - let me know if you know any, and I&rsquo;ll update this when I find out more!</p>

<h4 id="gilectomy-2017-larry-hastings">Gilectomy - 2017 (Larry Hastings)</h4>

<p>PyCon 2017 just happened, and Larry Hastings gave another talk!</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/pLqv11ScGsQ" frameborder="0" allowfullscreen></iframe>

<p>It seems to have had a lot of intense work done on it, and the wall clock time graph in it warms my heart! I&rsquo;ve a little more hope now than I did after the 2016 talk :D</p>

        </div>

        
        
        <div class="article-toc" >
            <h3>Contents</h3>
            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#python-s-infamous-gil-larry-hastings">Python&rsquo;s Infamous GIL (Larry Hastings)</a></li>
<li><a href="#understanding-the-python-gil-david-beazley">Understanding the Python GIL (David Beazley)</a></li>
<li><a href="#it-isn-t-easy-to-remove-the-gil-guido-van-rossum">It isn&rsquo;t easy to remove the GIL (Guido van Rossum)</a></li>
<li><a href="#an-inside-look-at-the-gil-removal-patch-of-lore-dave-beazley">An Inside Look at the GIL Removal Patch of Lore (Dave Beazley)</a></li>
<li><a href="#gilectomy-larry-hastings">Gilectomy (Larry Hastings)</a></li>
<li><a href="#gilectomy-2017-larry-hastings">Gilectomy - 2017 (Larry Hastings)</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
        
        

        


        
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="http://words.yuvi.in//tags/python">python
                    </a>
                </li>
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="http://words.yuvi.in//tags/learning">learning
                    </a>
                </li>
                
            </ul>
        </footer>
        
    </div>
    <nav id="article-nav">
    
    <a href="/post/things-to-build/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title"><span>&lt;</span>&nbsp;
            things to build
        </div>
    </a>
    
    
    <a href="/post/systemd-simple-containment/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">systemd simple containment for GUI applications &amp; shells&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>
</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Yuvi Panda&nbsp;
            Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos">Minos</a>
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>
</div>
</body>
</html>
