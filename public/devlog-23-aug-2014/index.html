<!DOCTYPE html>
<html>
<head>
    <title>DevLog for 23 Aug 2014 // Yuvi Panda</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="Open Knowledge | Open Source | Jupyter | Kubernetes | Wikimedia | Python">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="DevLog for 23 Aug 2014" />
    <meta property="og:description" content="Open Knowledge | Open Source | Jupyter | Kubernetes | Wikimedia | Python" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="http://words.yuvi.in/devlog-23-aug-2014/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="Yuvi Panda" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="http://words.yuvi.in/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="http://words.yuvi.in/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="http://words.yuvi.in/css/style.css">

    <link href="http://gmpg.org/xfn/11" rel="profile">
    
    <meta name="generator" content="Hugo 0.31.1" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="http://words.yuvi.in/">Yuvi Panda</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="mailto:yuvipanda@gmail.com">email</a>
                
                <a class="main-nav-link" href="https://github.com/yuvipanda">github</a>
                
                <a class="main-nav-link" href="https://twitter.com/yuvipanda">twitter</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>
    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">DevLog for 23 Aug 2014</h1>
        </header>
        
        <div class="article-meta">
            <a href="/devlog-23-aug-2014/" class="article-date">
                <time datetime='2014-08-24T02:56:40.000&#43;00:00' itemprop="datePublished">2014-08-24</time>
            </a>
            
            
            <div class="post-categories">
                <div class="article-category">
                    
                    
                    <a class="article-category-link" href="http://words.yuvi.in//categories/devlog">devlog</a>
                    
                </div>
            </div>
            
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            <p>Back in Glasgow! It was actually not very cold today, only cold! Progress.</p>

<p>Started working on my long-abandoned <code>labsbook</code> project, which aims to make <a href="https://tools.wmflabs.org">Tool Labs</a> a first class environment for people who want to run (and publish) <a href="http://ipython.org/notebook.html">iPython Notebooks</a> while also being able to access the replica databases and the dumps. Doing this in a secure manner is kinda hard, but I think I&#8217;ve a neat solution that lets everyone run a personal iPython kernel on the Grid, access it from their local machine, and also publish it to the web from a standard location. So far, I&#8217;ve gotten my script to a point where it&#8217;ll setup an iPython environment for you if it doesn&#8217;t already exist, start the kernel if it isn&#8217;t already running, and tunnel the editing interface back to you to use! Things left to do include:</p>

<ol>
<li>Open up the browser when tunnel is open</li>
<li>Find a sane way to kill a kernel that hasn&#8217;t been doing anything since forever</li>
<li>Setup a shared iPython environment (just code, readonly) so people don&#8217;t have to setup their own environments everytime (this is primarily a performance enhancement)</li>
<li>Find a nice and simple way for iPython notebooks to be published. I&#8217;m currently thinking of an URL such as <code>tools.wmflabs.org/notebooks/&lt;username&gt;/&lt;notebookname&gt;' to display them, and an index at</code>tools.wmflabs.org/notebooks/<username>`. This shouldn&#8217;t be too hard with appropriate permission munging.</li>
</ol>

<p>I&#8217;m also using <a href="http://www.paramiko.org/">paramiko</a> for this, which makes writing SSH related code with Python a breeze. It even supports <code>proxycommand</code>! Blunders I&#8217;ve done while getting up to this point include:</p>

<ol>
<li>Running <code>jsub run.bash -mem 4G</code> instead of <code>jsub -mem 4G run.bash</code> and wondering why my script kept getting killed with OOM.</li>
<li>Trying to do a <code>pip install</code> on the Grid nodes (which don&#8217;t have build tools) instead of on <code>tools-dev</code> and wondering why running it from the commandline works but from <code>jsub</code> does not.</li>
<li>Wondering why my SSH Tunnel kept dying and trying to debug that without realizing that it was dying because the iPython process was dying because it was OOMing because of my earlier <code>jsub</code> error</li>
<li>Thinking that user accounts (rather than tool accounts) can not submit jobs to the grid, while the problem was that I had not set the <code>execute</code> bit on my script.</li>
</ol>

<p>Once this is done (I suspect tomorrow), I&#8217;ll work on getting the data from my work with <a href="https://github.com/Ironholds/WPDMZ">WPDMZ</a> into a form good enough for publicizing (removing ways of de-anonymization), and then use iPython notebooks to make graphs! This should be fun :)</p>

<p>Source so far available <a href="https://github.com/yuvipanda/labsbooks">on Github</a>. Needs more work / documentation / cleaning up.</p>

        </div>

        
        
        

        


        
    </div>
    <nav id="article-nav">
    
    <a href="/devlog-aug-24-2014/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title"><span>&lt;</span>&nbsp;
            DevLog for Aug 24, 2014
        </div>
    </a>
    
    
    <a href="/devlog-aug-22-2014/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">Devlog for Aug 22 2014&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>
</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Yuvi Panda&nbsp;
            Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos">Minos</a>
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>
</div>
</body>
</html>
